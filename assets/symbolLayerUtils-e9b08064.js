import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-09e7d9b2.js";import{a as n}from"./Error-5cdd6e0a.js";import{e as b}from"./ItemCache-e927309e.js";import{r as m,c as w}from"./typedArrayUtil-bf9f210a.js";import{F as v,a as z}from"./aaBoundingBox-fb003858.js";import{t as _,c as g}from"./symbolLayerUtils3D-5cf2dcce.js";import"./string-53224faa.js";import"./promiseUtils-5940888c.js";import"./MemCache-b4d68123.js";import"./jsonMap-ffa742d3.js";import"./ArrayPool-b51874dd.js";import"./nextTick-3ee5a785.js";import"./Extent-22afa84a.js";import"./Ellipsoid-89682c5e.js";import"./aaBoundingRect-2fb32e32.js";import"./mathUtils-ae09f98b.js";import"./vec3-8818fe1c.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";let s=a();function a(){return new b(50)}function K(){s=a()}function M(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function N(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return m(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-3685cb27.js").then(l=>l.W),["./objectResourceUtils-3685cb27.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-bf9f210a.js","./mat3-4fd89d48.js","./common-d0b63c2d.js","./mat3f64-50f3b9f6.js","./mat4-f0dc8788.js","./vec3-8818fe1c.js","./mat4f64-abdda1bb.js","./aaBoundingBox-fb003858.js","./Extent-22afa84a.js","./jsonMap-ffa742d3.js","./string-53224faa.js","./Error-5cdd6e0a.js","./ArrayPool-b51874dd.js","./nextTick-3ee5a785.js","./promiseUtils-5940888c.js","./Ellipsoid-89682c5e.js","./aaBoundingRect-2fb32e32.js","./mathUtils-ae09f98b.js","./vec4-c7a19f0d.js","./BufferView-b402c7a7.js","./vec2-848c6cf0.js","./vec33-ca555933.js","./DefaultMaterial_COLOR_GAMMA-8ec4380b.js","./types-e1c0a5bf.js","./request-09e7d9b2.js","./preload-helper-41c905a7.js","./asyncUtils-24bd37b2.js","./enums-fc527c7c.js","./Version-621cc6b7.js","./quat-77a0169c.js","./quatf64-f8f1c132.js","./compilerUtils-7bf6df9e.js","./resourceUtils-527631ac.js","./basicInterfaces-7449a8bf.js","./Indices-f9b34f39.js","./DefaultMaterial.glsl-58ca0075.js","./ForwardLinearDepth.glsl-52bf5bdc.js","./Matrix3PassUniform-df6e2166.js","./ShaderBuilder-be7ca791.js","./vec3f32-01c06d8d.js","./VertexAttribute-15d1866a.js","./View.glsl-879c1eaf.js","./mat4f32-60a2394b.js","./Texture2DPassUniform-268e8d2d.js","./vec2f64-70cfd09e.js","./MixExternalColor.glsl-f5c601ed.js","./ShaderTechniqueConfiguration-0fa0f78c.js","./symbolColorUtils-1c63720c.js","./PhysicallyBasedRendering.glsl-edd81ba9.js","./FloatPassUniform-0426669b.js","./vec4f64-6d0e93be.js","./Float4PassUniform-9354414b.js","./RgbaFloatEncoding.glsl-67199794.js","./Texture2DDrawUniform-e4341b84.js","./PiUtils.glsl-49462ceb.js","./VisualVariablePassParameters-f892560d.js","./VertexElementDescriptor-2925c6af.js","./Texture-d2fa6cd8.js","./context-util-34d303b7.js","./ViewingMode-5d7d590b.js","./Util-513876a8.js","./Slice.glsl-cd30f0ea.js","./Transform.glsl-052069d0.js","./ObjectAndLayerIdColor.glsl-66083f64.js","./OutputDepth.glsl-17bf0574.js","./OutputHighlight.glsl-ca02d1ee.js","./VisualVariables.glsl-bb97d5ba.js","./DiscardOrAdjustAlphaBlend.glsl-27f02ebd.js","./AlphaCutoff-96178e0d.js","./TransparencyPassType-c3841b0a.js","./VertexColor.glsl-2f905a78.js","./VerticalOffset.glsl-109e8746.js","./Normals.glsl-6a1bc6fb.js","./EvaluateSceneLighting.glsl-14c608ff.js","./SSAOBlur.glsl-c56632c0.js","./ScreenSpacePass.glsl-44cc0c5e.js","./ReadLinearDepth.glsl-0e6f5c47.js","./SSAO.glsl-2c6533cd.js","./MultipassTerrainTest.glsl-8b279fcd.js","./vec2f32-eaf29605.js","./byteSizeEstimations-f0cab514.js","./Texture-ae652f15.js","./Evented-686173eb.js","./TextureOnly.glsl-469cc321.js","./assets-94d592bf.js","./Attribute-f72d3f37.js","./sphere-a48b65b1.js","./lineSegment-4eb8b6fa.js","./InterleavedLayout-07cc6753.js","./DefaultTechniqueConfiguration-b54ae0b1.js","./RealisticTree.glsl-29f7cbd7.js"],import.meta.url),c=await y.fetch(o,{disableTextures:!0});return s.put(o,c.referenceBoundingBox),c.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),m(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{K as clearBoundingBoxCache,p as computeIconLayerResourceSize,M as computeLayerResourceSize,N as computeLayerSize,f as computeObjectLayerResourceSize};
