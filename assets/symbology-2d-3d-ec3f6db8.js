import{t as Qe,u as Qi,y as Pi,d as en,l as ri,c as tn,n as nn,L as on}from"./SceneView-7ac05f56.js";import{e as l,y as h,a as X,v as dt,t as sn,d as rn,s as an}from"./jsonMap-ffa742d3.js";import"./ArrayPool-b51874dd.js";import{o as de,t as L,r as I,l as ln,T as dn,e as hn}from"./typedArrayUtil-bf9f210a.js";import{e as Ae,W as Ke,n as p,a as ai,t as cn,g as un,l as pn,m as mn,b as fn,v as gt,k as vt,f as gn,d as vn}from"./widget-01c21b51.js";import{s as nt,a as Di}from"./Error-5cdd6e0a.js";import{a as Ci,f as ot,P as _n,h as st,l as j,U as Oi,w as Te}from"./reactiveUtils-53e5756b.js";import{_ as Tt}from"./preload-helper-41c905a7.js";import{d as yn}from"./HandleOwner-6217a02e.js";import{u as bn,i as wn,n as et,g as li,o as xn,a as En}from"./TimeExtent-64e16588.js";import"./string-53224faa.js";import{L as oe,T as kn}from"./number-036ac4ef.js";import{i as De,n as Pn}from"./promiseUtils-5940888c.js";import{s as Dn}from"./intl-87d72dbe.js";import{j as ze}from"./Collection-74ae958a.js";import{l as bt,i as Cn}from"./locale-fe7cc1d0.js";import{D as Fe,I as On,a as Sn}from"./datetime-eed49b9b.js";import{h as Rt}from"./GraphicsLayer-cbd6e467.js";import{g as Et}from"./Graphic-5dcfa25e.js";import{w as Ht}from"./Extent-22afa84a.js";import{h as Bt,e as Mn,l as Tn}from"./symbols-5f42cb0e.js";import"./Clonable-7fa7ad97.js";import"./Cyclical-47bda305.js";import"./mathUtils-ae09f98b.js";import"./vec3-8818fe1c.js";import"./common-d0b63c2d.js";import"./vec4-c7a19f0d.js";import"./geometry-7d866d3f.js";import"./Polyline-82cb63bc.js";import"./typeUtils-1714017f.js";import"./jsonUtils-36bf3d33.js";import"./screenUtils-410d12c0.js";import"./workers-c8fc8d43.js";import"./Connection-3d9fb42e.js";import"./request-09e7d9b2.js";import"./assets-94d592bf.js";import"./nextTick-3ee5a785.js";import"./HeightModelInfo-73f516f9.js";import"./projection-4ac247db.js";import"./SimpleObservable-bd2c3ae8.js";import"./mat4-f0dc8788.js";import"./aaBoundingRect-2fb32e32.js";import"./Ellipsoid-89682c5e.js";import"./zscale-baa108ea.js";import"./sphere-a48b65b1.js";import"./vec4f64-6d0e93be.js";import"./byteSizeEstimations-f0cab514.js";import"./mat3f64-50f3b9f6.js";import"./mat4f64-abdda1bb.js";import"./quatf64-f8f1c132.js";import"./vec2f64-70cfd09e.js";import"./lineSegment-4eb8b6fa.js";import"./plane-01584357.js";import"./spatialReferenceEllipsoidUtils-88aa82c4.js";import"./scaleUtils-a3b834c2.js";import"./layerUtils-eef15b39.js";import"./AttachmentInfo-23249301.js";import"./AttachmentQuery-f1085685.js";import"./fieldUtils-d430f46c.js";import"./arcadeOnDemand-dd48afd7.js";import"./PopupTemplate-81dc9b83.js";import"./enumeration-925aa0f6.js";import"./Identifiable-e4f9b04c.js";import"./ColorStop-29c89bbb.js";import"./Color-7b46c33a.js";import"./colorUtils-639f4d25.js";import"./utils-6a5cc1bf.js";import"./asyncUtils-24bd37b2.js";import"./BlendLayer-793ff14a.js";import"./mat4f32-60a2394b.js";import"./ItemCache-e927309e.js";import"./MemCache-b4d68123.js";import"./jsonUtils-9b4d797d.js";import"./UniqueValueRenderer-80c8e628.js";import"./diffUtils-1bae97a1.js";import"./Portal-8dfa7a94.js";import"./Loadable-40ecd3b9.js";import"./Promise-755e47e5.js";import"./PortalGroup-00fb77a4.js";import"./PortalUser-9579f611.js";import"./colorRamps-18bbdf60.js";import"./opacityUtils-d4a4b602.js";import"./sizeVariableUtils-d4870b0d.js";import"./visualVariableUtils-61985981.js";import"./compilerUtils-7bf6df9e.js";import"./lengthUtils-3c9047c4.js";import"./Evented-686173eb.js";import"./CIMSymbol-8f55d4ab.js";import"./symbolLayerUtils3D-5cf2dcce.js";import"./aaBoundingBox-fb003858.js";import"./persistableUrlUtils-3635dccc.js";import"./Symbol3DAnchorPosition2D-e9d8a8f4.js";import"./collectionUtils-423a192d.js";import"./jsonUtils-27937179.js";import"./styleUtils-689841ac.js";import"./DictionaryLoader-1c3435ac.js";import"./LRUCache-86d9ad15.js";import"./deprecate-ba25fc78.js";import"./heatmapUtils-8ee685fd.js";import"./Query-b0193ce7.js";import"./Field-945b2973.js";import"./fieldType-24ac97df.js";import"./executeQueryJSON-044ac84b.js";import"./normalizeUtils-353ec0fc.js";import"./normalizeUtilsCommon-d8ea404e.js";import"./query-b4dff312.js";import"./pbfQueryUtils-481b10bc.js";import"./pbf-845dcafd.js";import"./OptimizedFeature-3e582950.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./queryZScale-f6e44ca7.js";import"./FeatureSet-b4fbf079.js";import"./featureConversionUtils-aead6959.js";import"./RelationshipQuery-765b2184.js";import"./TopFeaturesQuery-d2b31d08.js";import"./FeatureLayer-e767d294.js";import"./MultiOriginJSONSupport-06f8f24a.js";import"./serviceCapabilitiesUtils-22f436bd.js";import"./arcgisLayerUrl-1b8d6c52.js";import"./FeatureLayerBase-633118ca.js";import"./OperationalLayer-db187f46.js";import"./ElevationInfo-005ddd87.js";import"./TimeReference-adaa7961.js";import"./Layer-524734fa.js";import"./editsZScale-9d0832b8.js";import"./APIKeyMixin-ef4ccb38.js";import"./ArcGISService-24587a68.js";import"./CustomParametersMixin-2798ec18.js";import"./EditBusLayer-b1010019.js";import"./FeatureReductionLayer-5ef01ce2.js";import"./labelingInfo-e65ecbf4.js";import"./labelUtils-b68da70f.js";import"./defaultsJSON-59981e75.js";import"./OrderedLayer-045186a6.js";import"./PortalLayer-d69e402d.js";import"./PortalItem-4d7e1038.js";import"./portalItemUtils-0655aa33.js";import"./RefreshableLayer-12bc7ba2.js";import"./ScaleRangeLayer-d1b04b80.js";import"./TemporalLayer-f231f22a.js";import"./FeatureTemplate-5a472038.js";import"./FeatureType-017f886c.js";import"./fieldProperties-7a0757a8.js";import"./FieldsIndex-113320d3.js";import"./versionUtils-9a1e7983.js";import"./styleUtils-5c617777.js";import"./popupUtils-b8625101.js";import"./messages-1516d146.js";import"./callExpressionWithFeature-eb5719d8.js";import"./quantizationUtils-16db4e0b.js";import"./Scheduler-61737382.js";import"./ElevationSamplerData-3fc2a90f.js";import"./TileInfo-9973cd47.js";import"./Basemap-5a7c72ee.js";import"./loadAll-8ca49458.js";import"./writeUtils-b7104d82.js";import"./CollectionFlattener-80d223f1.js";import"./TablesMixin-8f62a14c.js";import"./ViewingMode-5d7d590b.js";import"./vec2-848c6cf0.js";import"./PhysicallyBasedRendering.glsl-edd81ba9.js";import"./View.glsl-879c1eaf.js";import"./ShaderBuilder-be7ca791.js";import"./FloatPassUniform-0426669b.js";import"./Float4PassUniform-9354414b.js";import"./RgbaFloatEncoding.glsl-67199794.js";import"./Texture2DPassUniform-268e8d2d.js";import"./vec3f32-01c06d8d.js";import"./VertexAttribute-15d1866a.js";import"./Texture2DDrawUniform-e4341b84.js";import"./basicInterfaces-7449a8bf.js";import"./PiUtils.glsl-49462ceb.js";import"./ReadLinearDepth.glsl-0e6f5c47.js";import"./WaterSurface.glsl-e13d44e2.js";import"./ForwardLinearDepth.glsl-52bf5bdc.js";import"./Matrix3PassUniform-df6e2166.js";import"./Slice.glsl-cd30f0ea.js";import"./Transform.glsl-052069d0.js";import"./OutputHighlight.glsl-ca02d1ee.js";import"./MultipassTerrainTest.glsl-8b279fcd.js";import"./NormalUtils.glsl-84d184a7.js";import"./AlphaCutoff-96178e0d.js";import"./TransparencyPassType-c3841b0a.js";import"./EvaluateSceneLighting.glsl-14c608ff.js";import"./VisualVariablePassParameters-f892560d.js";import"./enums-fc527c7c.js";import"./VertexElementDescriptor-2925c6af.js";import"./Texture-d2fa6cd8.js";import"./context-util-34d303b7.js";import"./Util-513876a8.js";import"./SSAOBlur.glsl-c56632c0.js";import"./ScreenSpacePass.glsl-44cc0c5e.js";import"./SSAO.glsl-2c6533cd.js";import"./ShaderTechniqueConfiguration-0fa0f78c.js";import"./mat3-4fd89d48.js";import"./HUD.glsl-73b068b4.js";import"./VerticalOffset.glsl-109e8746.js";import"./Octree-813f29c9.js";import"./objectResourceUtils-3685cb27.js";import"./devEnvironmentUtils-5002a058.js";import"./BufferView-b402c7a7.js";import"./vec33-ca555933.js";import"./DefaultMaterial_COLOR_GAMMA-8ec4380b.js";import"./types-e1c0a5bf.js";import"./Version-621cc6b7.js";import"./quat-77a0169c.js";import"./resourceUtils-527631ac.js";import"./Indices-f9b34f39.js";import"./DefaultMaterial.glsl-58ca0075.js";import"./MixExternalColor.glsl-f5c601ed.js";import"./symbolColorUtils-1c63720c.js";import"./ObjectAndLayerIdColor.glsl-66083f64.js";import"./OutputDepth.glsl-17bf0574.js";import"./VisualVariables.glsl-bb97d5ba.js";import"./DiscardOrAdjustAlphaBlend.glsl-27f02ebd.js";import"./VertexColor.glsl-2f905a78.js";import"./Normals.glsl-6a1bc6fb.js";import"./vec2f32-eaf29605.js";import"./Texture-ae652f15.js";import"./TextureOnly.glsl-469cc321.js";import"./Attribute-f72d3f37.js";import"./InterleavedLayout-07cc6753.js";import"./DefaultTechniqueConfiguration-b54ae0b1.js";import"./RealisticTree.glsl-29f7cbd7.js";import"./edgeProcessing-ac701714.js";import"./deduplicate-a70aec6f.js";import"./MeshComponent-777de3ff.js";import"./earcut-61f7b102.js";import"./projection-03824933.js";import"./HUDMaterial.glsl-82200888.js";import"./sdfPrimitives-3ceeab79.js";import"./floatRGBA-1f66d0a4.js";import"./dehydratedFeatures-efdbcd90.js";import"./labelFormatUtils-f90ee62f.js";import"./orientedBoundingBox-6188c4d9.js";import"./quatf32-51a323b8.js";import"./LineCallout.glsl-76cd336e.js";import"./SnappingCandidate-970faec6.js";import"./MarkerSizing.glsl-950a18f6.js";import"./RibbonLine.glsl-8fe4662b.js";import"./LineStipple.glsl-4eef2aea.js";import"./LineMarker.glsl-2c017de2.js";import"./NativeLine.glsl-9893bc56.js";import"./Path.glsl-2eb74a31.js";import"./ColorMaterial.glsl-1d45c81e.js";import"./Pattern.glsl-698f2083.js";import"./LercDecoder-f1486af7.js";import"./enums-fb086c25.js";import"./config-f7904f35.js";import"./TileKey-4d1284e4.js";import"./workerHelper-2d7b0d57.js";import"./capabilities-caaa1278.js";import"./uuid-73213768.js";let _e=class extends dt{constructor(t){super(t),this._vendorInfo=null,this._fullscreenStyle="width: 100%; height: 100%;",this.view=null,this._errorHandler=this._errorHandler.bind(this),this._stateHandler=this._stateHandler.bind(this)}destroy(){this._removeFullscreenListeners(),this.view=null}get element(){var t;return((t=this.view)==null?void 0:t.container)??null}set element(t){this._override("element",t)}get state(){return this.element?this._isSupported()?this._isActive()?"active":"ready":"feature-unsupported":"disabled"}enter(){this._enterFullscreen()}exit(){this._exitFullscreen()}toggle(){this._isActive()?this._exitFullscreen():this._enterFullscreen()}_isSupported(){this._removeFullscreenListeners();const t=this._getVendorInfo(this.element);return this._addFullscreenListeners(t),this._vendorInfo=t,!!t}_isActive(){return!!this._vendorInfo&&!!document[this._vendorInfo.propertyName]}_stateHandler(){this.notifyChange("state"),this.state==="active"?this._addStyle():this._removeStyle()}_errorHandler(t){nt.getLogger(this.declaredClass).error("fullscreen request failed",t)}_getVendorInfo(t){if(t)return t.requestFullscreen?{enterName:"requestFullscreen",exitName:"exitFullscreen",errorEventName:"fullscreenerror",changeEventName:"fullscreenchange",propertyName:"fullscreen"}:t.webkitRequestFullScreen?{enterName:"webkitRequestFullscreen",exitName:"webkitCancelFullScreen",errorEventName:"webkitfullscreenerror",changeEventName:"webkitfullscreenchange",propertyName:"webkitIsFullScreen"}:t.mozRequestFullScreen?{enterName:"mozRequestFullScreen",exitName:"mozCancelFullScreen",errorEventName:"mozfullscreenerror",changeEventName:"mozfullscreenchange",propertyName:"mozFullScreen"}:t.msRequestFullscreen?{enterName:"msRequestFullscreen",exitName:"msExitFullscreen",errorEventName:"MSFullscreenError",changeEventName:"MSFullscreenChange",propertyName:"msFullscreenElement"}:void 0}_enterFullscreen(){if(this.state==="feature-unsupported")return void nt.getLogger(this.declaredClass).warn("The fullscreen API is not supported in this browser.");const{element:t}=this;t&&(this._vendorInfo&&t[this._vendorInfo.enterName].call(t),this.notifyChange("state"))}_addStyle(){const{element:t}=this;t&&t.setAttribute("style",this._fullscreenStyle)}_removeStyle(){const{element:t}=this;t&&t.removeAttribute("style")}_exitFullscreen(){if(this.state==="feature-unsupported")return;const{element:t}=this;t&&(this._vendorInfo&&document[this._vendorInfo.exitName].call(document),this.notifyChange("state"))}_addFullscreenListeners(t){t&&(document.addEventListener(t.changeEventName,this._stateHandler),document.addEventListener(t.errorEventName,this._errorHandler))}_removeFullscreenListeners(){const{_vendorInfo:t}=this;t&&(document.removeEventListener(t.changeEventName,this._stateHandler),document.removeEventListener(t.errorEventName,this._errorHandler))}};l([h()],_e.prototype,"element",null),l([h({readOnly:!0})],_e.prototype,"state",null),l([h()],_e.prototype,"view",void 0),l([h()],_e.prototype,"enter",null),l([h()],_e.prototype,"exit",null),l([h()],_e.prototype,"toggle",null),_e=l([X("esri.widgets.Fullscreen.FullscreenViewModel")],_e);const Si=_e,Ne={base:"esri-fullscreen esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",enter:"esri-icon-zoom-out-fixed",exit:"esri-icon-zoom-in-fixed",disabled:"esri-disabled"};let he=class extends Ke{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Si}get element(){return this.viewModel.element}set element(e){this.viewModel.element=e}get fullscreenTitle(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return e==="active"?this.messages.exit:e==="ready"?this.messages.enter:""}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){var n;const e=(n=this.viewModel)==null?void 0:n.state,{fullscreenTitle:t}=this,i={[Ne.disabled]:e==="disabled"||e==="feature-unsupported"};return p("div",{bind:this,class:this.classes(Ne.base,i),role:"button",tabIndex:0,onclick:this._toggle,onkeydown:this._toggle,"aria-label":t,title:t},this.renderIcon(),this.renderTitle())}renderIcon(){var i;const e=(i=this.viewModel)==null?void 0:i.state,t={[Ne.enter]:e==="ready"||e==="disabled"||e==="feature-unsupported",[Ne.exit]:e==="active"};return p("span",{class:this.classes(Ne.icon,t),"aria-hidden":"true"})}renderTitle(){return p("span",{class:Ne.text},this.fullscreenTitle)}_toggle(){this.viewModel.toggle()}};l([h()],he.prototype,"element",null),l([h({readOnly:!0})],he.prototype,"fullscreenTitle",null),l([h()],he.prototype,"label",null),l([h(),Ae("esri/widgets/Fullscreen/t9n/Fullscreen")],he.prototype,"messages",void 0),l([h()],he.prototype,"view",null),l([h({type:Si})],he.prototype,"viewModel",void 0),l([Qe()],he.prototype,"_toggle",null),he=l([X("esri.widgets.Fullscreen")],he);const In=he;let Pe=class extends dt{constructor(t){super(t),this._viewpointHandle=null,this._handles=new sn,this.group=null}initialize(){this._handles.add(Ci(()=>{var t;return(t=this.view)==null?void 0:t.ui},"expand",t=>{const{target:i}=t;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(t){this._set("autoCollapse",t),this._watchViewpoint()}set expanded(t){const i=!!t;this._set("expanded",i);const n=this.get("view.ui");n&&n.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(t){this._get("view")!==t&&(this._set("view",t),t&&ot(()=>t.ready,()=>{this.view===t&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(t){this._viewpointHandle&&(t?ot(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const t="viewpoint";this._handles.remove(t),this._viewpointHandle=null;const{autoCollapse:i,view:n}=this;if(n&&i){const o=_n(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this._handles.add(o,t),this._viewpointHandle=o}}_collapse(){this.expanded=!1}};l([h({value:!1})],Pe.prototype,"autoCollapse",null),l([h({value:!1})],Pe.prototype,"expanded",null),l([h()],Pe.prototype,"group",void 0),l([h({readOnly:!0})],Pe.prototype,"state",null),l([h({value:null})],Pe.prototype,"view",null),Pe=l([X("esri.widgets.Expand.ExpandViewModel")],Pe);const Mi=Pe,J="esri-expand",R={base:`${J} esri-widget`,modeAuto:`${J}--auto`,modeDrawer:`${J}--drawer`,modeFloating:`${J}--floating`,container:`${J}__container`,containerExpanded:`${J}__container--expanded`,panel:`${J}__panel`,button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:`${J}__icon--expanded`,iconNumber:`${J}__icon-number`,iconNumberExpanded:`${J}__icon-number--expanded`,expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:`${J}__content`,contentExpanded:`${J}__content--expanded`,expandMask:`${J}__mask`,expandMaskExpanded:`${J}__mask--expanded`};let z=class extends Ke{constructor(t,i){super(t,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new Mi,this._handleKeyDown=n=>{const{closeOnEsc:o,_toggleButtonEl:s,expanded:a}=this;!a||!o||n.target===s||n.key!=="Escape"||(typeof o=="function"?o(n):o)&&(this.expanded=!1,s==null||s.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:t,messagesCommon:i,collapseTooltip:n,expandTooltip:o}=this;return t?n||i.collapse:o||i.expand}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(t){this.viewModel.autoCollapse=t}get collapseIconClass(){return R.collapseIcon}set collapseIconClass(t){this._overrideIfSome("collapseIconClass",t)}get expanded(){return this.viewModel.expanded}set expanded(t){this.viewModel.expanded=t}get expandIconClass(){return ai(this.content)?this.content.iconClass:R.expandIcon}set expandIconClass(t){this._overrideIfSome("expandIconClass",t)}get group(){return this.viewModel.group}set group(t){this.viewModel.group=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:t}=this,i={[R.modeAuto]:t==="auto",[R.modeDrawer]:t==="drawer",[R.modeFloating]:t==="floating"};return p("div",{class:this.classes(R.base,i),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:t}=this,i={[R.containerExpanded]:t};return p("div",{class:this.classes(R.container,i)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:t}=this,i={[R.expandMaskExpanded]:t};return p("div",{bind:this,onclick:this._toggle,class:this.classes(R.expandMask,i)})}renderBadgeNumber(){const{expanded:t,iconNumber:i}=this;return i&&!t?p("span",{key:"expand__icon-number",class:R.iconNumber},i):null}renderPanelNumber(){const{iconNumber:t,expanded:i}=this;return t&&i?p("span",{key:"expand__expand-icon-number",class:this.classes(R.iconNumber,R.iconNumberExpanded)},t):null}renderIcon(){const{collapseIconClass:t,expandIconClass:i,expanded:n}=this,o={[R.iconExpanded]:n,[t]:n,[i]:!n};return t===i&&(o[t]=!0),p("span",{"aria-hidden":"true",class:this.classes(R.icon,o)})}renderTitle(){return p("span",{class:R.text},this.expandTitle)}renderExpandButton(){const{expanded:t,expandTitle:i,contentId:n}=this;return p("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":n,"aria-expanded":t?"true":"false",bind:this,class:R.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:i},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return p("div",{class:R.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:t,contentId:i,content:n}=this,o={[R.contentExpanded]:t},s={id:i,role:"region",class:this.classes(R.content,o)};return typeof n=="string"?p("div",{key:"content__string",innerHTML:n,...s}):ai(n)?p("div",{key:"content__widget",...s},n.render()):n instanceof HTMLElement?p("div",{key:"content__html-element",bind:n,afterCreate:this._attachToNode,...s}):cn(n)?p("div",{key:"content__node",bind:n.domNode,afterCreate:this._attachToNode,...s}):null}_toggle(){this.toggle()}_attachToNode(t){const i=this;t.appendChild(i)}_storeToggleButtonEl(t){this._toggleButtonEl=t}};l([h({readOnly:!0})],z.prototype,"contentId",null),l([h({readOnly:!0})],z.prototype,"expandTitle",null),l([h()],z.prototype,"autoCollapse",null),l([h()],z.prototype,"closeOnEsc",void 0),l([h()],z.prototype,"collapseIconClass",null),l([h()],z.prototype,"collapseTooltip",void 0),l([h()],z.prototype,"content",void 0),l([h()],z.prototype,"expanded",null),l([h()],z.prototype,"expandIconClass",null),l([h()],z.prototype,"expandTooltip",void 0),l([h()],z.prototype,"group",null),l([h()],z.prototype,"iconNumber",void 0),l([h()],z.prototype,"label",null),l([h(),Ae("esri/widgets/Expand/t9n/Expand")],z.prototype,"messages",void 0),l([h(),Ae("esri/t9n/common")],z.prototype,"messagesCommon",void 0),l([h()],z.prototype,"mode",void 0),l([h()],z.prototype,"view",null),l([h({type:Mi})],z.prototype,"viewModel",void 0),l([Qe()],z.prototype,"_toggle",null),z=l([X("esri.widgets.Expand")],z);const An=z,ce="esri-daylight",It=`${ce}__container`,A={base:ce,widgetIcon:"esri-icon-environment-settings",widget:"esri-widget",select:"esri-select",pause:"esri-icon-pause",play:"esri-icon-play",slider:"esri-slider",datePickerCalendarToggle:"esri-date-picker__calendar-toggle",shadowOff:"esri-slider--shadow-off",shadowOn:"esri-slider--shadow-on",sliderDateOn:"esri-slider--date-on",sliderDateOff:"esri-slider--date-off",sliderAmPmOn:"esri-slider--ampm-on",sliderAlignLeft:"esri-slider--align-left",sliderAlignRight:"esri-slider--align-right",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",secondaryTick:"secondary-tick",dayContainer:`${It} ${ce}__day-container`,dateContainer:`${It} ${ce}__date-container`,containerDisabled:`${It}--disabled`,playPauseButton:`${ce}__play-pause-button`,seasonPicker:`${ce}__season-picker`,seasonPickerDisabled:`${ce}__season-picker--disabled`,panelError:`${ce}__panel--error`,sunLightingCheckbox:`${ce}__sun-lighting-checkbox`,shadowsCheckbox:`${ce}__shadows-checkbox`};var me;(function(e){e[e.NORTHERN=0]="NORTHERN",e[e.SOUTHERN=1]="SOUTHERN"})(me||(me={}));const Ln={spring:{dayOfMonth:20,month:2},summer:{dayOfMonth:21,month:5},fall:{dayOfMonth:23,month:8},winter:{dayOfMonth:21,month:11}},$t=["spring","summer","fall","winter"];function Je(e,t,i){const n=Ut(t,i),{dayOfMonth:o,month:s}=Ln[n],a=new Date(e.getTime());return a.setMonth(s,o),a}function $n(e,t){return Ut(zn(e),t)}function zn(e){const t=e.getTime(),i=Je(e,"spring",me.NORTHERN).getTime(),n=Je(e,"summer",me.NORTHERN).getTime(),o=Je(e,"fall",me.NORTHERN).getTime(),s=Je(e,"winter",me.NORTHERN).getTime();return t>=i&&t<n?"spring":t>=n&&t<o?"summer":t>=o&&t<s?"fall":"winter"}function Ut(e,t){return t===me.NORTHERN?e:Fn(e)}function Fn(e){const t=$t.indexOf(e);return $t[(t+2)%4]}function Nn(e,t){return bn(e,t,"minutes")}function Vn(e){return wn(e,"minutes")}function Rn(e,t,i){if(e==null||t==null||isNaN(e.getTime())&&isNaN(t.getTime()))return 3e5;const d=i.getTime(),u=e.getTime(),c=t.getTime(),m=u-72e5/2,g=u+72e5/2,f=c-72e5/3*2,_=c+72e5/3;let v=3e5;return d>=m&&d<=g?v=d-m<=12e5?18e5-(d-m)/12e5*(18e5-2e5):g-d<=12e5/2?3e5-(g-d)/12e5*2*(3e5-2e5):2e5:d>=f&&d<=_?v=d-f<=12e5/2?3e5-(d-f)/12e5*2*(3e5-2e5):_-d<=12e5?18e5-(_-d)/12e5*(18e5-2e5):2e5:(d<u||d>c)&&(v=18e5),v}let G=class extends dt{constructor(t){super(t),this.precision=4,this.thumbsConstrained=!0}set effectiveMax(t){this.setEffectiveMax(t)}set effectiveMin(t){this.setEffectiveMin(t)}set labelFormatFunction(t){this._set("labelFormatFunction",t)}set inputFormatFunction(t){this._set("inputFormatFunction",t)}set inputParseFunction(t){this._set("inputParseFunction",t)}get labels(){const{max:t,min:i,values:n}=this,o=n&&n.length?n.map((s,a)=>this.getLabelForValue(s,"value",a)):[];return{max:this.getLabelForValue(t,"max"),min:this.getLabelForValue(i,"min"),values:o}}set max(t){this.setMax(t)}set min(t){this.setMin(t)}get state(){const{max:t,min:i}=this;return t!=null&&i!=null&&t>i?"ready":"disabled"}set values(t){const{max:i,min:n}=this,o=this.values;o&&t&&o.length===t.length&&o.every((s,a)=>s===t[a])||(this._set("values",null),t&&t.length&&(n!=null&&t.some(s=>s<n)&&(this.min=Math.min(...t)),i!=null&&t.some(s=>s>i)&&(this.max=Math.max(...t))),this._set("values",t))}toPrecision(t){return parseFloat(t.toFixed(this.precision))}defaultLabelFormatFunction(t){const{max:i,min:n,precision:o}=this,s=i!=null&&n!=null&&i-n>10?2:o;return parseFloat(t.toFixed(s)).toString()}defaultInputFormatFunction(t){return t.toString()}defaultInputParseFunction(t){return parseFloat(t)}getBounds(){const{effectiveMax:t,effectiveMin:i,max:n,min:o}=this;return{min:i!=null&&o!=null?Math.max(o,i):o,max:t!=null&&n!=null?Math.min(n,t):n}}getBoundsForValueAtIndex(t){const{thumbsConstrained:i,values:n}=this,{min:o,max:s}=this.getBounds();if(i&&n){const a=t-1,r=t+1;return{min:n[a]!=null?n[a]:o,max:n[r]!=null?n[r]:s}}return{min:o,max:s}}getLabelForValue(t,i,n){return t==null?null:this.labelFormatFunction?this.labelFormatFunction(t,i,n):this.defaultLabelFormatFunction(t)}setMax(t){const{max:i,values:n}=this;if(t==null)return void this._set("max",null);if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for property 'max' is NaN.");const o=this.toPrecision(t);if(i!==o&&(this._set("max",o),n&&n.length))for(let s=0;s<n.length;s++)o<n[s]&&this.setValue(s,o)}setMin(t){const{min:i,values:n}=this;if(t==null)return void this._set("min",null);if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for property 'min' is NaN.");const o=this.toPrecision(t);if(i!==o&&(this._set("min",o),n&&n.length))for(let s=0;s<n.length;s++)o>n[s]&&this.setValue(s,o)}setEffectiveMax(t){if(t==null)return void this._set("effectiveMax",null);if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMax' is NaN.");const i=this.toPrecision(t);this.effectiveMax!==i&&this._set("effectiveMax",this._applyBoundsToValue(i))}setEffectiveMin(t){if(t==null)return void this._set("effectiveMin",null);if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMin' is NaN.");const i=this.toPrecision(t);this.effectiveMin!==i&&this._set("effectiveMin",this._applyBoundsToValue(i))}setValue(t,i){if(isNaN(i))return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is NaN.");const{values:n}=this;if(n==null)return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is null.");const o=n[t],s=this.toPrecision(i);if(o===s)return;const a=[...n];a[t]=s,this._set("values",a),this.notifyChange("labels")}_applyBoundsToValue(t){const{max:i,min:n}=this;return n!=null&&t<n?n:i!=null&&t>i?i:t}_logError(t,i,n){nt.getLogger(this.declaredClass).error(new Di(t,i,n))}};l([h()],G.prototype,"effectiveMax",null),l([h()],G.prototype,"effectiveMin",null),l([h()],G.prototype,"labelFormatFunction",null),l([h()],G.prototype,"inputFormatFunction",null),l([h()],G.prototype,"inputParseFunction",null),l([h({readOnly:!0})],G.prototype,"labels",null),l([h()],G.prototype,"max",null),l([h()],G.prototype,"min",null),l([h()],G.prototype,"precision",void 0),l([h({readOnly:!0})],G.prototype,"state",null),l([h()],G.prototype,"thumbsConstrained",void 0),l([h()],G.prototype,"values",null),G=l([X("esri.widgets.Slider.SliderViewModel")],G);const Ti=G;let be=class extends Ti{constructor(t){super(t),this.items=[],this.currentIndex=0,this.isDropdownOpen=!1}get currentItem(){return this.items!==null&&this.currentIndex!==null&&this.currentIndex<this.items.length?this.items[this.currentIndex]:null}selectItem(t){this.currentIndex=t,this.isDropdownOpen=!1}toggle(){this.isDropdownOpen=!this.isDropdownOpen}};l([h()],be.prototype,"items",void 0),l([h()],be.prototype,"currentIndex",void 0),l([h()],be.prototype,"currentItem",null),l([h()],be.prototype,"isDropdownOpen",void 0),be=l([X("esri.widgets.Daylight.SliderWithDropdown")],be);let Ze=class extends dt{constructor(){super(...arguments),this.state="ready",this.value=new Date}};l([h()],Ze.prototype,"state",void 0),l([h()],Ze.prototype,"value",void 0),Ze=l([X("esri.widgets.support.DateTimeElementViewModel")],Ze);const Hn=Ze;let zt=class extends Hn{constructor(t){super(t)}};zt=l([X("esri.widgets.support.DatePickerViewModel")],zt);const kt=zt,Bn={hour:"2-digit",minute:"2-digit",timeZone:"UTC"},Un={hour:"numeric",timeZone:"UTC"};function di(e,t){let i;if(t==="tick"){const o=Math.round(li(e,"minutes","hours"));i=new Date(li(o,"hours","milliseconds"))}else i=new Date(6e4*e);let n=oe(i,Bn);return e!==0&&n==="00:00"&&(n="24:00"),t==="tick"&&n.includes(" ")&&(n=oe(i,Un),n=n.replace(":00","")),n}function jn(e,t,i,n){if(t==null||i==null)return null;const o=Qi.getTimes(e,t,i),s=o.sunrise,a=o.sunset,r=et(e,n,"hours"),d=et(s,n,"hours"),u=et(a,n,"hours");if(r.getUTCDate()!==d.getUTCDate()||r.getUTCDate()!==u.getUTCDate()){const c=r.getTime()-d.getTime()>0?1:-1;s.setUTCDate(s.getUTCDate()+c),a.setUTCDate(a.getUTCDate()+c)}return{sunrise:s,sunset:a}}function Wn(e){return[{utcOffset:-12,short:"UTC-12",long:e.timezoneDateline},{utcOffset:-11,short:"UTC-11",long:e.timezoneSamoa},{utcOffset:-10,short:e.timezoneHAST,long:e.timezoneHawaii},{utcOffset:-9,short:e.timezoneAKST,long:e.timezoneAlaska},{utcOffset:-8,short:e.timezonePST,long:e.timezoneBaja},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneMountain},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneLaPaz},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneArizona},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneSaskatchewan},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralAmerica},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralTime},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneMexico},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneEasternUS},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneLima},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneIndiana},{utcOffset:-4,short:null,long:e.timezoneAtlantic},{utcOffset:-4,short:null,long:e.timezoneCuiaba},{utcOffset:-4,short:null,long:e.timezoneSantiago},{utcOffset:-4,short:null,long:e.timezoneManaus},{utcOffset:-4,short:null,long:e.timezoneAsuncion},{utcOffset:-3,short:null,long:e.timezoneBrasilia},{utcOffset:-3,short:null,long:e.timezoneGreenland},{utcOffset:-3,short:null,long:e.timezoneMontevideo},{utcOffset:-3,short:null,long:e.timezoneCayenne},{utcOffset:-3,short:null,long:e.timezoneBuenosAires},{utcOffset:-2,short:null,long:e.timezoneMidAtlantic},{utcOffset:-1,short:null,long:e.timezoneAzores},{utcOffset:-1,short:null,long:e.timezoneCaboVerde},{utcOffset:0,short:null,long:e.timezoneDublin},{utcOffset:0,short:null,long:e.timezoneReykjavik},{utcOffset:0,short:null,long:e.timezoneCasablanca},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBelgrade},{utcOffset:1,short:e.timezoneCET,long:e.timezoneSarajevo},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBrussels},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWCAfrica},{utcOffset:1,short:e.timezoneCET,long:e.timezoneAmsterdam},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWindhoek},{utcOffset:2,short:e.timezoneEET,long:e.timezoneMinsk},{utcOffset:2,short:e.timezoneEET,long:e.timezoneCairo},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHelsinki},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAthens},{utcOffset:2,short:e.timezoneEET,long:e.timezoneJerusalem},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAmman},{utcOffset:2,short:e.timezoneEET,long:e.timezoneBeirut},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHarare},{utcOffset:2,short:e.timezoneEET,long:e.timezoneDamascus},{utcOffset:2,short:e.timezoneEET,long:e.timezoneIstanbul},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKuwait},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneBaghdad},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneNairobi},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKaliningrad},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMoscow},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMuscat},{utcOffset:4,short:e.timezoneGST,long:e.timezoneBaku},{utcOffset:4,short:e.timezoneGST,long:e.timezoneYerevan},{utcOffset:4,short:e.timezoneGST,long:e.timezoneTbilisi},{utcOffset:4,short:e.timezoneGST,long:e.timezonePortLouis},{utcOffset:5,short:null,long:e.timezoneTashkent},{utcOffset:5,short:null,long:e.timezoneIslamabad},{utcOffset:6,short:null,long:e.timezoneEkaterinburg},{utcOffset:6,short:null,long:e.timezoneAstana},{utcOffset:6,short:null,long:e.timezoneDhaka},{utcOffset:7,short:e.timezoneICT,long:e.timezoneNovosibirsk},{utcOffset:7,short:e.timezoneICT,long:e.timezoneBangkok},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneKrasnoyarsk},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneBeijing},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneSingapore},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneTaipei},{utcOffset:8,short:e.timezoneCCT,long:e.timezonePerth},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneUlaanbaatar},{utcOffset:9,short:e.timezoneJST,long:e.timezoneIrkutsk},{utcOffset:9,short:e.timezoneJST,long:e.timezoneSeoul},{utcOffset:9,short:e.timezoneJST,long:e.timezoneOsaka},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneYakutsk},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneCanberra},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneBrisbane},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneHobart},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneGuam},{utcOffset:11,short:null,long:e.timezoneVladivostok},{utcOffset:11,short:null,long:e.timezoneSolomon},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneMagadan},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneFiji},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneAuckland},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneNukualofa}].map(({utcOffset:t,short:i,long:n})=>{const o=t>0?`UTC+${t}`:t<0?`UTC${t}`:"GMT";return i?{utcOffset:t,short:i,shortWithUTC:`${o} (${i})`,long:n}:{utcOffset:t,short:o,shortWithUTC:o,long:n}})}let S=class extends yn{constructor(t){super(t),this.view=null,this.datePickerViewModel=new kt,this.timeSliderViewModel=new be({min:0,max:1439,values:[0],labelFormatFunction:di,inputFormatFunction:di}),this.lightingUpdateInterval=200,this._oldLighting=null,this.playSpeedMultiplier=1,this._lastTime=null,this._sunrise=null,this._sunset=null,this._cachedLightingDateUTC=new Date(0),this._cachedDisplayUTCOffset=0,this._firstInteraction=!0,this._lastLightingUpdate=0,this._nextLightingUpdate=null}initialize(){this.handles.add([ot(()=>this.view,t=>t.when(()=>this._updateLighting(null)),st),j(()=>de(this._lighting,t=>t.type!=="virtual"?t.date:null),t=>this._scheduleUpdateLighting(t)),Ci(()=>this._lighting,"timezone-will-change",t=>this._timezoneWillChange(t),{onListenerAdd:()=>this._timezoneWillChange(null)}),j(()=>de(this.view,t=>t.stationary)===!0,()=>{(this.dayPlaying||this.yearPlaying)&&this._updateSunriseAndSunset()},st),j(()=>{const t=this.timeSliderViewModel;return{vm:t,state:t.state,sliderPosition:this.timeSliderPosition}},({vm:t,state:i,sliderPosition:n})=>{i==="ready"&&t.setValue(0,n)}),j(()=>{var t;return(t=this.timeSliderViewModel.currentItem)==null?void 0:t.utcOffset},t=>this.utcOffset=t),j(()=>this.timeSliderViewModel.isDropdownOpen,()=>this.stopPlaying()),j(()=>this.timeSliderViewModel.values,t=>this.timeSliderPosition=(t==null?void 0:t[0])??0),j(()=>this.datePickerViewModel.value,t=>{this.dayPlaying=!1,this.localDate=t}),j(()=>this.localDate,t=>{this.datePickerViewModel.value.valueOf()!==t.getTime()&&this.datePickerViewModel.set("value",t)})])}destroy(){this._nextLightingUpdate&&(clearTimeout(this._nextLightingUpdate),this._nextLightingUpdate=null),this.view=null}get isSupported(){return L(this.view)||this.view.type==="3d"}get utcOffset(){return this._cachedDisplayUTCOffset}set utcOffset(t){t!==this.utcOffset&&I(this._lighting)&&this._lighting.type!=="virtual"&&(this._lighting.displayUTCOffset=t,this._updateLighting(null))}get localDate(){return xn(this._lightingDateDisplay)}set localDate(t){t.getTime()!==this.localDate.getTime()&&(this._lightingDateDisplay=En(this._lightingDateDisplay,t))}get timeSliderPosition(){return Vn(this._lightingDateDisplay)}set timeSliderPosition(t){Math.abs(t-this.timeSliderPosition)>1/60&&(this._lightingDateDisplay=Nn(this._lightingDateDisplay,t),this.stopPlaying(),this._enableDirectShadowsIfFirstInteraction())}_timezoneFromCamera(t,i){if(L(i)||!t.cameraTrackingEnabled)return 0;const n=en([i.longitude,i.latitude]);return L(n)?0:Math.round(n.hours+n.minutes/60+n.seconds/3600)}get directShadowsEnabled(){const t=de(this._lighting,i=>i.directShadowsEnabled);return ln(t,!1)}set directShadowsEnabled(t){de(this._lighting,i=>{i.directShadowsEnabled=t})}get sunLightingEnabled(){return this._lightingType==="sun"}set sunLightingEnabled(t){const i=this._environment;if(t===this._get("sunLightingEnabled")||L(i))return;const n=i.lighting,o=this._oldLighting;this._oldLighting=n;const s={directShadowsEnabled:n.directShadowsEnabled,ambientOcclusionEnabled:n.ambientOcclusionEnabled,waterReflectionEnabled:n.waterReflectionEnabled,cameraTrackingEnabled:n.cameraTrackingEnabled},a=t?"sun":"virtual";let r;r=I(o)&&o.type===a?o:t?new ri:new tn,r.set(s),i.lighting=r,t||(this.timeSliderViewModel.isDropdownOpen=!1)}set playingState(t){this.playingState!==t&&this.sunLightingEnabled&&(this._set("playingState",t),t!=="none"&&(this._updateSunriseAndSunset(),this._lastTime=Date.now(),this._play(),this._enableDirectShadowsIfFirstInteraction()))}get dayPlaying(){return this.playingState==="day"}set dayPlaying(t){t?this.playingState="day":this.dayPlaying&&(this.playingState="none")}get yearPlaying(){return this.playingState==="year"}set yearPlaying(t){t?this.playingState="year":this.yearPlaying&&(this.playingState="none")}get currentSeason(){return $n(this.localDate,this._currentHemisphere)}set currentSeason(t){this.stopPlaying();const i=Ut(t,this._currentHemisphere);this.localDate=Je(this.localDate,i,me.NORTHERN)}get _currentHemisphere(){const t=de(this.view,i=>{var n,o;return(o=(n=i.camera)==null?void 0:n.position)==null?void 0:o.latitude});return L(t)||t>=0?me.NORTHERN:me.SOUTHERN}get _environment(){return de(this.view,t=>t.environment)}get _lighting(){return de(this._environment,t=>t.lighting)}get _lightingType(){return de(this._lighting,t=>t.type)}get _lightingDateDisplay(){return et(this._cachedLightingDateUTC,this._cachedDisplayUTCOffset,"hours")}set _lightingDateDisplay(t){const i=this._lighting;if(L(i)||!this.sunLightingEnabled||i.type==="virtual")return;const n=et(t,-this._cachedDisplayUTCOffset,"hours");n.getTime()!==i.date.getTime()&&(i.date=n,this._updateLighting(null))}stopPlaying(){this.playingState="none"}toggleDayPlaying(){this.dayPlaying=!this.dayPlaying}toggleYearPlaying(){this.yearPlaying=!this.yearPlaying}toggleSunLightingEnabled(){this.stopPlaying(),this.sunLightingEnabled=!this.sunLightingEnabled}toggleDirectShadowsEnabled(){this.stopPlaying(),this.directShadowsEnabled=!this.directShadowsEnabled}_enableDirectShadowsIfFirstInteraction(){this._firstInteraction&&(this._firstInteraction=!1,this.directShadowsEnabled=!0)}_updateLighting(t){var d;const i=Date.now();this._lastLightingUpdate=i;const{view:n}=this,o=this._lighting;if(L(n)||L(o)||o.type==="virtual")return;const s=t||o.date,a=o.displayUTCOffset,r=a!==null?a:this._timezoneFromCamera(o,(d=n.camera)==null?void 0:d.position);this._cachedLightingDateUTC.getTime()!==s.getTime()&&(this._cachedLightingDateUTC=new Date(s.getTime())),this._cachedDisplayUTCOffset!==r&&(this._cachedDisplayUTCOffset=r)}_timezoneWillChange(t){const i=this._lighting;if(L(i)||i.type==="virtual"||!i.cameraTrackingEnabled)return;let n;if(t)n=t.timezoneOffset;else{if(i.displayUTCOffset!=null)return;n=ri.calculateTimezoneOffset(i.positionTimezoneInfo)}i.displayUTCOffset=n,this._scheduleUpdateLighting(null)}_scheduleUpdateLighting(t){if(this._nextLightingUpdate||L(t))return;const i=Date.now()-this._lastLightingUpdate,n=this.lightingUpdateInterval-i;n<=0?rn(()=>this._updateLighting(t)):this._nextLightingUpdate=setTimeout(()=>{this._updateLighting(null),this._nextLightingUpdate=null},n)}_play(){const t=this._lighting;if(!L(t)&&this.sunLightingEnabled&&t.type!=="virtual"&&(this.dayPlaying||this.yearPlaying)){const i=Date.now()-(this._lastTime??0);if(this.dayPlaying){this._lastTime=Date.now();const n=Rn(this._sunrise,this._sunset,t.date)*this.playSpeedMultiplier/100*i;if(n>0){let o=new Date(t.date.getTime()+n);const s=t.displayUTCOffset??0;((o.getUTCHours()+s)%24+24)%24<((t.date.getUTCHours()+s)%24+24)%24&&(o=new Date(t.date.getTime()+n-864e5)),t.date=o}}else if(i>1e3){this._lastTime=Date.now();const n=(t.date.getUTCMonth()+1)%12,o=new Date(t.date.getTime());o.setUTCMonth(n),t.date=o}requestAnimationFrame(()=>this._play())}}_updateSunriseAndSunset(){const t=this._lighting;if(L(t)||t.type==="virtual"||!this.sunLightingEnabled)return;const i=de(this.view,d=>{var u;return(u=d.camera)==null?void 0:u.position});if(L(i))return;const{latitude:n,longitude:o}=i,{date:s,displayUTCOffset:a}=t,r=jn(s,n,o,a);r&&(this._sunrise=new Date(r.sunrise),this._sunset=new Date(r.sunset))}};l([h({type:Pi})],S.prototype,"view",void 0),l([h({type:kt,nonNullable:!0})],S.prototype,"datePickerViewModel",void 0),l([h({type:be,nonNullable:!0})],S.prototype,"timeSliderViewModel",void 0),l([h()],S.prototype,"isSupported",null),l([h()],S.prototype,"lightingUpdateInterval",void 0),l([h()],S.prototype,"utcOffset",null),l([h()],S.prototype,"localDate",null),l([h()],S.prototype,"timeSliderPosition",null),l([h()],S.prototype,"directShadowsEnabled",null),l([h()],S.prototype,"sunLightingEnabled",null),l([h({type:["none","day","year"],value:"none"})],S.prototype,"playingState",null),l([h()],S.prototype,"dayPlaying",null),l([h()],S.prototype,"yearPlaying",null),l([h()],S.prototype,"playSpeedMultiplier",void 0),l([h()],S.prototype,"currentSeason",null),l([h()],S.prototype,"_lastTime",void 0),l([h()],S.prototype,"_sunrise",void 0),l([h()],S.prototype,"_sunset",void 0),l([h()],S.prototype,"_cachedLightingDateUTC",void 0),l([h()],S.prototype,"_cachedDisplayUTCOffset",void 0),l([h()],S.prototype,"_firstInteraction",void 0),l([h()],S.prototype,"_currentHemisphere",null),l([h()],S.prototype,"_environment",null),l([h()],S.prototype,"_lighting",null),l([h()],S.prototype,"_lightingType",null),l([h()],S.prototype,"_lightingDateDisplay",null),S=l([X("esri.widgets.Daylight.DaylightViewModel")],S);const Ii=S;let ye=class extends dt{constructor(){super(...arguments),this.header=!0,this.playButtons=!0,this.datePicker=!0,this.timezone=!0,this.sunLightingToggle=!0,this.shadowsToggle=!0}};l([h({type:Boolean,nonNullable:!0})],ye.prototype,"header",void 0),l([h({type:Boolean,nonNullable:!0})],ye.prototype,"playButtons",void 0),l([h({type:Boolean,nonNullable:!0})],ye.prototype,"datePicker",void 0),l([h({type:Boolean,nonNullable:!0})],ye.prototype,"timezone",void 0),l([h({type:Boolean,nonNullable:!0})],ye.prototype,"sunLightingToggle",void 0),l([h({type:Boolean,nonNullable:!0})],ye.prototype,"shadowsToggle",void 0),ye=l([X("esri.widgets.Daylight.VisibleElements")],ye);const Ai=ye,O="esri-slider",b={base:O,reversed:`${O}--reversed`,horizontalLayout:`${O}--horizontal`,verticalLayout:`${O}--vertical`,contentElement:`${O}__content`,extraContentElement:`${O}__extra-content`,trackElement:`${O}__track`,ticksContainerElement:`${O}__ticks`,tickElement:`${O}__tick`,tickLabelElement:`${O}__tick-label`,maxElement:`${O}__max`,minElement:`${O}__min`,maxElementInteractive:`${O}__max--interactive`,minElementInteractive:`${O}__min--interactive`,rangeElementActive:`${O}__range--active`,rangeInput:`${O}__range-input`,anchorElement:`${O}__anchor`,movingAnchorElement:`${O}__anchor--moving`,lastMovedAnchorElement:`${O}__anchor--moved`,anchorElementActive:`${O}__anchor--active`,anchorElementIndexPrefix:`${O}__anchor-`,segmentElement:`${O}__segment`,segmentElementIndexPrefix:`${O}__segment-`,segmentElementInteractive:`${O}__segment--interactive`,segmentElementActive:`${O}__segment--active`,effectiveSegmentElement:`${O}__effective-segment`,effectiveMaxSegmentElement:`${O}__effective-max-segment`,effectiveMinSegmentElement:`${O}__effective-min-segment`,thumbElement:`${O}__thumb`,labelElement:`${O}__label`,labelElementInteractive:`${O}__label--interactive`,labelInput:`${O}__label-input`,esriWidget:"esri-widget",widgetIcon:"esri-icon-edit",disabled:"esri-disabled",hidden:"esri-hidden"},Z={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},Kn="esri.widgets.Slider",hi={labels:!1,rangeLabels:!1};let x=class extends Ke{constructor(e,t){super(e,t),this._activeLabelInputIndex=null,this._anchorElements=[],this._dragged=!1,this._dragStartInfo=null,this._focusedAnchorIndex=null,this._isMinInputActive=!1,this._isMaxInputActive=!1,this._lastMovedHandleIndex=null,this._positionPrecision=5,this._segmentDragStartInfo=null,this._trackHeight=null,this._trackWidth=null,this._zIndices=null,this._zIndexOffset=3,this.disabled=!1,this.draggableSegmentsEnabled=!0,this.effectiveSegmentElements=new ze,this.extraNodes=[],this.inputCreatedFunction=null,this.labelElements=new ze,this.labelInputsEnabled=!1,this.maxLabelElement=null,this.messages=null,this.minLabelElement=null,this.rangeLabelInputsEnabled=!1,this.segmentElements=new ze,this.snapOnClickEnabled=!0,this.steps=null,this.syncedSegmentsEnabled=!1,this.thumbCreatedFunction=null,this.thumbElements=new ze,this.tickElements=new ze,this.trackElement=null,this.viewModel=new Ti,this.visibleElements={...hi},this._onAnchorPointerDown=this._onAnchorPointerDown.bind(this),this._onAnchorPointerMove=this._onAnchorPointerMove.bind(this),this._onAnchorPointerUp=this._onAnchorPointerUp.bind(this),this._onLabelPointerDown=this._onLabelPointerDown.bind(this),this._onLabelPointerUp=this._onLabelPointerUp.bind(this),this._onSegmentPointerDown=this._onSegmentPointerDown.bind(this),this._onSegmentPointerMove=this._onSegmentPointerMove.bind(this),this._onSegmentPointerUp=this._onSegmentPointerUp.bind(this),this._onTrackPointerDown=this._onTrackPointerDown.bind(this),this._onTrackPointerMove=this._onTrackPointerMove.bind(this),this._onTrackPointerUp=this._onTrackPointerUp.bind(this)}destroy(){document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove),document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),this.labelElements.removeAll(),this.labelElements.destroy(),this.segmentElements.removeAll(),this.segmentElements.destroy(),this.effectiveSegmentElements.removeAll(),this.effectiveSegmentElements.destroy(),this.thumbElements.removeAll(),this.thumbElements.destroy(),this.tickElements.removeAll(),this.tickElements.destroy()}get effectiveMax(){return this.viewModel.effectiveMax}set effectiveMax(e){this.viewModel.effectiveMax=e}get effectiveMin(){return this.viewModel.effectiveMin}set effectiveMin(e){this.viewModel.effectiveMin=e}get inputFormatFunction(){return this.viewModel.inputFormatFunction}set inputFormatFunction(e){this.viewModel.inputFormatFunction=e}get inputParseFunction(){return this.viewModel.inputParseFunction}set inputParseFunction(e){this.viewModel.inputParseFunction=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}get labels(){return this.viewModel.labels}set layout(e){["vertical","vertical-reversed","horizontal","horizontal-reversed"].includes(e)||(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get precision(){return this.viewModel.precision}set precision(e){this.viewModel.precision=e}get state(){const{_activeLabelInputIndex:e,_isMaxInputActive:t,_isMinInputActive:i,_dragStartInfo:n,_segmentDragStartInfo:o,disabled:s,viewModel:a}=this,r=I(n)||I(o);return s?"disabled":e===null&&!t&&!i?r?"dragging":a.state:"editing"}get thumbsConstrained(){return this.viewModel.thumbsConstrained}set thumbsConstrained(e){this.viewModel.thumbsConstrained=e}set tickConfigs(e){this._set("tickConfigs",e),this.scheduleRender()}get values(){return this.viewModel.values}set values(e){this.viewModel.values=e}castVisibleElements(e){return{...hi,...e}}render(){const{label:e}=this,t=this.classes(b.base,b.esriWidget,this._isHorizontalLayout()?b.horizontalLayout:b.verticalLayout,this._isReversedLayout()?b.reversed:null,this._isDisabled()?b.disabled:null);return this._storeTrackDimensions(),p("div",{"aria-label":e,class:t,"touch-action":"none",bind:this,afterCreate:this._afterContainerCreate},this.renderContent())}toNextStep(e){this._toStep(e,1)}toPreviousStep(e){this._toStep(e,-1)}renderContent(){const{max:e,min:t}=this;if(!(L(t)||L(e)||t>=e))return[this.renderMin(),this.renderSliderContainer(),this.renderMax()]}renderSliderContainer(){return p("div",{key:"slider-container",bind:this,class:b.contentElement},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())}renderTrackElement(){return p("div",{afterCreate:this._afterTrackCreate,afterRemoved:this._afterTrackRemoved,bind:this,class:b.trackElement,"touch-action":"none"},this.renderEffectiveSegmentElements(),this.renderSegmentElements(),this.renderAnchorElements())}renderEffectiveSegmentElements(){if(!this.trackElement||!this.values||!this.values.length)return;const e=I(this.effectiveMax),t=I(this.effectiveMin);if(!e&&!t)return;const{max:i,min:n,viewModel:o}=this,s=o.getBounds(),a=[];return t&&a.push(this.renderEffectiveSegmentElement(n,s.min,!0)),e&&a.push(this.renderEffectiveSegmentElement(s.max,i,!1)),a}renderSegmentElements(){if(!this.trackElement||!this.values||!this.values.length)return;const e=this.values.length,t=[];for(let i=0;i<=e;i++)t.push(this.renderSegmentElement(i));return t}renderSegmentElement(e){const{_trackHeight:t,_trackWidth:i,draggableSegmentsEnabled:n,id:o,state:s,values:a}=this,r=this._isHorizontalLayout(),d=r?i:t,u=this.viewModel.getBounds(),c=this._positionFromValue(u.max),m=this._positionFromValue(u.min),g=e===a.length?null:e,f=e===0?null:e-1,_=I(g),v=I(f);let y,E;const C=[...a].sort((T,F)=>T-F);this._isReversedLayout()?(y=v?this._positionFromValue(C[f]):m,E=_?this._positionFromValue(C[g]):c):(y=_?this._positionFromValue(C[g]):c,E=v?this._positionFromValue(C[f]):m);const M=this._applyPrecisionToPosition(100*E/d),w=(y-E)/d,P=r?`transform: translate(${M}%, 0px) scale(${w}, 1);`:`transform: translate(0px, ${M}%) scale(1, ${w});`,D=this.classes(b.segmentElement,b.segmentElementIndexPrefix+e,n&&_&&v&&s!=="disabled"?b.segmentElementInteractive:null);return p("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:D,"data-max-thumb-index":g,"data-min-thumb-index":f,"data-segment-index":e,key:`${o}-segment-${e}`,style:P,"touch-action":"none"})}renderEffectiveSegmentElement(e,t,i){const{_trackHeight:n,_trackWidth:o,layout:s}=this,a=this._positionFromValue(e),r=this._positionFromValue(t),d=this._isHorizontalLayout(),u=d?o:n,c=this._applyPrecisionToPosition(100*a/u);let m=null;if(s==="horizontal"){const _=i?u-r:r,v=a===u?0:c;m=`clip-path: inset(0% ${r===u?0:this._applyPrecisionToPosition(_/u*100)}% 0% ${v}%);`}else{const _=(r-a)/u;m=d?`transform: translate(${c}%, 0px) scale(${_}, 1);`:`transform: translate(0px, ${c}%) scale(1, ${_});`}const g=i?b.effectiveMinSegmentElement:b.effectiveMaxSegmentElement,f=this.classes(b.segmentElement,b.effectiveSegmentElement,g);return p("div",{afterCreate:this._afterEffectiveSegmentCreate,afterRemoved:this._afterEffectiveSegmentRemoved,bind:this,class:f,style:m,"touch-action":"none"})}renderAnchorElements(){const{trackElement:e,values:t}=this;if(t&&t.length)return this._zIndices=t.map((i,n)=>{const o=this._positionFromValue(i),s=this._positionToPercent(o),a=(this._isHorizontalLayout()?s>50:s<50)?-1:1;return this._zIndexOffset+(t.length+a*n)}),e&&t&&t.length?t.map((i,n)=>this.renderAnchorElement(i,n)):null}renderAnchorElement(e,t){const i=this._positionFromValue(e),n=this._valueFromPosition(i);if(L(n)||isNaN(n))return;const{_dragStartInfo:o,_lastMovedHandleIndex:s,id:a,layout:r,values:d,visibleElements:{labels:u}}=this,c=o&&o.index===t,m=s===t,g=this.classes(b.anchorElement,b.anchorElementIndexPrefix+t,c?b.movingAnchorElement:null,m?b.lastMovedAnchorElement:null),f=this.labels.values[t],_=this._getStyleForAnchor(e,t,c||m),{min:v,max:y}=this.viewModel.getBoundsForValueAtIndex(t),{disabled:E,messages:C}=this,M=d.length===2?Dn(t===0?C.rangeMinimum:C.rangeMaximum,{value:e}):f,w=d.length===1?null:t===0?`${a}-handle-${t+1}`:t===d.length-1?`${a}-handle-${t-1}`:`${a}-handle-${t-1} ${a}-handle-${t+1}`;return p("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":w,"aria-label":C.sliderValue,"aria-labelledby":u?`${a}-label-${t}`:null,"aria-orientation":r,"aria-valuemax":y.toString(),"aria-valuemin":v.toString(),"aria-valuenow":e.toString(),"aria-valuetext":M,bind:this,class:g,"data-thumb-index":t,"data-value":e,id:`${a}-handle-${t}`,key:`${a}-handle-${t}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:_,tabIndex:E?-1:0},p("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:b.thumbElement,"data-thumb-index":t,"touch-action":"none"}),this.renderThumbLabel(t))}renderThumbLabel(e){const{id:t,labels:i,labelInputsEnabled:n,state:o}=this,s=this.visibleElements.labels,a=i.values[e],r=this.classes(b.labelElement,s?null:b.hidden,n&&o!=="disabled"?b.labelElementInteractive:null);return p("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":(!s).toString(),bind:this,class:r,"data-thumb-index":e,key:`${t}-label-${e}`,id:`${t}-label-${e}`,role:n?"button":null,"touch-action":"none"},this._activeLabelInputIndex===e?this.renderValueInput(e):a)}renderValueInput(e){const{disabled:t,values:i}=this,n=i[e];return p("input",{key:`value-input-${e}`,afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:b.labelInput,"data-input-type":"thumb","data-input-index":e,required:!0,tabIndex:t?-1:0,type:"text",value:this._formatInputValue(n,"value",e),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})}renderMax(){const{_isMaxInputActive:e,labels:t,rangeLabelInputsEnabled:i,state:n}=this,o=this.visibleElements.rangeLabels,s=this.classes(b.maxElement,{[b.hidden]:!o,[b.maxElementInteractive]:i&&n!=="disabled",[b.rangeElementActive]:e});return p("div",{"aria-hidden":(!o).toString(),afterCreate:this._afterMaxLabelCreate,bind:this,class:s,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:i?"button":null,tabIndex:!this.disabled&&i?0:-1},e?this.renderMaxInput():t.max)}renderMin(){const{_isMinInputActive:e,labels:t,rangeLabelInputsEnabled:i,state:n}=this,o=this.visibleElements.rangeLabels,s=this.classes(b.minElement,{[b.hidden]:!o,[b.minElementInteractive]:i&&n!=="disabled",[b.rangeElementActive]:e});return p("div",{"aria-hidden":(!o).toString(),afterCreate:this._afterMinLabelCreate,bind:this,class:s,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:i?"button":null,tabIndex:!this.disabled&&i?0:-1},e?this.renderMinInput():t.min)}renderMaxInput(){return p("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:b.rangeInput,"data-input-type":"max",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})}renderMinInput(){return p("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:b.rangeInput,"data-input-type":"min",required:!0,tabIndex:this.disabled?-1:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})}renderExtraContentElements(){return p("div",{bind:this,class:b.extraContentElement},this.extraNodes)}renderTicksContainer(){if(this.tickConfigs&&this.trackElement&&(this._trackHeight!==0||this._trackWidth!==0))return this.tickConfigs.map((e,t)=>p("div",{key:"ticks-container",class:this.classes(b.ticksContainerElement)},this.renderTicks(e,t)))}renderTicks(e,t){const{mode:i,values:n}=e;if(this.tickElements.getItemAt(t)||this.tickElements.add(new ze,t),i==="position"){const a=Array.isArray(n)?n:[n];return this._calculateTickPositions(a).map((r,d)=>this.renderTickGroup(e,d,t,r))}if(i==="percent"&&Array.isArray(n)){const{max:a,min:r}=this,d=a-r,u=n.map(c=>this._applyPrecisionToPosition(c/100*d+r));return this._calculateTickPositions(u).map((c,m)=>this.renderTickGroup(e,m,t,c))}const o=Array.isArray(n)&&n.length?n[0]:isNaN(n)?null:n,s=this._getTickCounts(o,e);return this._calculateEquidistantTickPositions(s).map((a,r)=>this.renderTickGroup(e,r,t,a))}renderTickGroup(e,t,i,n){const o=e.mode==="position"?Array.isArray(e.values)?e.values[t]:e.values:this._valueFromPosition(n);if(!L(o)&&!isNaN(o))return p("div",{afterCreate:this._afterTickGroupCreate,afterRemoved:this._afterTickGroupRemoved,bind:this,"data-config":e,"data-position":n,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":o,onclick:this._onTickGroupClick,key:`tick-group-${t}`},this.renderTickLine(e,t,i,o),e.labelsVisible?this.renderTickLabel(e,t,i,o):null)}renderTickLine(e,t,i,n){return p("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":n.toString(),bind:this,class:b.tickElement,"data-config":e,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":n,key:`tick-label-${t}`,style:this._getPositionStyleForElement(n)})}renderTickLabel(e,t,i,n){const o=e.labelFormatFunction?e.labelFormatFunction(n,"tick",t):this.viewModel.getLabelForValue(n,"tick",t);return p("div",{afterCreate:this._afterTickLabelCreate,"aria-label":o,"aria-valuenow":n.toString(),"aria-valuetext":o,bind:this,class:b.tickLabelElement,"data-config":e,"data-tick-config-index":i,"data-tick-group-index":t,"data-value":n,key:`tick-label-${t}`,style:`transform: translate(-50%); ${this._getPositionStyleForElement(n)}`},o)}_afterContainerCreate(e){this.addHandles(un(e,()=>this.scheduleRender()))}_afterTrackCreate(e){this._set("trackElement",e),e.addEventListener("pointerdown",this._onTrackPointerDown),this.scheduleRender()}_afterTrackRemoved(e){e.removeEventListener("pointerdown",this._onTrackPointerDown),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp)}_afterSegmentCreate(e){this.segmentElements.add(e),e.addEventListener("pointerdown",this._onSegmentPointerDown)}_afterSegmentRemoved(e){this.segmentElements.remove(e),e.removeEventListener("pointerdown",this._onSegmentPointerDown)}_afterEffectiveSegmentCreate(e){this.effectiveSegmentElements.add(e)}_afterEffectiveSegmentRemoved(e){this.effectiveSegmentElements.remove(e)}_afterAnchorCreate(e){if(this._anchorElements.push(e),e.addEventListener("pointerdown",this._onAnchorPointerDown),this.thumbCreatedFunction){const t=e["data-thumb-index"],i=e["data-value"],n=this.thumbElements.getItemAt(t)||null,o=this.labelElements.getItemAt(t)||null;this.thumbCreatedFunction(t,i,n,o)}}_afterAnchorUpdate(e){I(this._focusedAnchorIndex)&&e["data-thumb-index"]===this._focusedAnchorIndex&&(e.focus(),this._focusedAnchorIndex=null)}_afterAnchorRemoved(e){const t=this._anchorElements.indexOf(e,0);t>-1&&this._anchorElements.splice(t,1),e.removeEventListener("pointerdown",this._onAnchorPointerDown)}_afterThumbCreate(e){this.thumbElements.add(e)}_afterThumbRemoved(e){this.thumbElements.remove(e)}_afterLabelCreate(e){this.labelElements.add(e),e.addEventListener("pointerdown",this._onLabelPointerDown),e.addEventListener("pointerup",this._onLabelPointerUp)}_afterLabelRemoved(e){this.labelElements.remove(e),e.removeEventListener("pointerdown",this._onLabelPointerDown),e.removeEventListener("pointerup",this._onLabelPointerUp)}_afterInputCreate(e){if(e.focus(),e.select(),this.inputCreatedFunction){const t=e.getAttribute("data-input-type"),i=t==="thumb"?e["data-input-index"]:null;this.inputCreatedFunction(e,t,i)}}_afterTickLineCreate(e){const t=e["data-tick-config-index"],i=e["data-tick-group-index"],n=this.tickElements.getItemAt(t);n.getItemAt(i)?n.getItemAt(i).tickElement=e:n.add({groupElement:null,tickElement:e,labelElement:null},i)}_afterTickLabelCreate(e){const t=e["data-tick-config-index"],i=e["data-tick-group-index"],n=this.tickElements.getItemAt(t);n.getItemAt(i)?n.getItemAt(i).labelElement=e:n.add({groupElement:null,labelElement:e,tickElement:null},i)}_afterTickGroupRemoved(e){const t=e["data-tick-config-index"],i=this.tickElements.items[t],n=i==null?void 0:i.find(o=>o.groupElement===e);n&&i.remove(n)}_afterTickGroupCreate(e){var i,n;const t=e["data-config"];if(t&&t.tickCreatedFunction){const o=e["data-tick-config-index"],s=e["data-tick-group-index"],a=e["data-value"],r=(n=(i=this.tickElements)==null?void 0:i.getItemAt(o))==null?void 0:n.getItemAt(s);if(r){r.groupElement=e;const d=r.tickElement||null,u=r.labelElement||null;t.tickCreatedFunction(a,d,u)}}}_afterMaxLabelCreate(e){this._set("maxLabelElement",e)}_afterMinLabelCreate(e){this._set("minLabelElement",e)}_onAnchorKeyDown(e){if(this._isDisabled()||this.state==="editing")return;const{target:t}=e,i=De(e),{_anchorElements:n,values:o}=this,s=t["data-thumb-index"],a=n[s],r=o[s],d=[Z.moveAnchorUp,Z.moveAnchorDown,Z.moveAnchorLeft,Z.moveAnchorRight];if(i===Z.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=s,this.notifyChange("state");else if(d.includes(i)){e.preventDefault();const{steps:u}=this,c=i===Z.moveAnchorUp||i===Z.moveAnchorRight?1:-1;if(I(u))this._toStep(s,this._isReversedLayout()?-1*c:c);else{const{precision:g}=this,f=this._getPositionOfElement(a),_=this._valueFromPosition(f),v=this._isHorizontalLayout()?c:-1*c;let y;y=g===0?this._positionFromValue(_+v):g===1?this._positionFromValue(_+.1*v):f+v,this._toPosition(s,y)}const m=this.values[s];r!==m&&this._emitThumbChangeEvent({index:s,oldValue:r,value:m})}else if(i===Z.moveAnchorToMax||i===Z.moveAnchorToMin){e.preventDefault();const{min:u,max:c}=this._getAnchorBoundsInPixels(s),m=this._isPositionInverted()?i===Z.moveAnchorToMax?u:c:i===Z.moveAnchorToMin?u:c;this._toPosition(s,m);const g=this.values[s];r!==g&&this._emitThumbChangeEvent({index:s,oldValue:r,value:g})}}_onAnchorPointerDown(e){if(this._isDisabled())return;const{target:t,clientX:i,clientY:n}=e,o=t["data-thumb-index"];o!==void 0&&(e.preventDefault(),this._anchorElements[o]&&this._anchorElements[o].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:i,clientY:n,index:o,position:this._getPositionOfElement(this._anchorElements[o])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onAnchorPointerMove(e){if(this.state==="editing"||!this._dragStartInfo)return;e.preventDefault();const{values:t,_anchorElements:i,_dragged:n,_dragStartInfo:o,_dragStartInfo:{index:s,position:a}}=this,{clientX:r,clientY:d}=e,u=n?"drag":"start",c=i[s],m=this._getPositionOfElement(c),g=this._applyPrecisionToPosition(this._isHorizontalLayout()?a+r-o.clientX:a+d-o.clientY);if(m===g)return;const f=t[s];this._dragged=!0,this._toPosition(s,g);const _=this.values[s];n?f!==_&&this._emitThumbDragEvent({index:s,state:u,value:_}):this._emitThumbDragEvent({index:s,state:u,value:f})}_onAnchorPointerUp(e){if(document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),!this._dragStartInfo)return;e.preventDefault();const{index:t}=this._dragStartInfo,i=this._dragged,n=this.values[t];this._dragged=!1,this._dragStartInfo=null,this._lastMovedHandleIndex=t,this.notifyChange("state"),i?this._emitThumbDragEvent({index:t,state:"stop",value:n}):(this.scheduleRender(),this.state!=="editing"&&this._emitThumbClickEvent({index:t,value:n}))}_onTrackPointerDown(e){const{_dragStartInfo:t,snapOnClickEnabled:i,state:n,values:o}=this;if(this._isDisabled()||n==="editing"||t||(document.addEventListener("pointermove",this._onTrackPointerMove),document.addEventListener("pointerup",this._onTrackPointerUp),!i||!o.length))return;const{steps:s}=this,{clientX:a,clientY:r}=e,d=this._getCursorPositionFromEvent(e),u=this._valueFromPosition(d),c=this._getIndexOfNearestValue(u),m=o[c],g=o.some((y,E)=>y===m&&E!==c)&&u>m?this.values.lastIndexOf(m):c;if(L(g))return;const f=o[g],_=I(s)?this._calculateNearestStepPosition(d):d;this._toPosition(g,_),this._dragged=!0,this._dragStartInfo={clientX:a,clientY:r,index:g,position:_},this._focusedAnchorIndex=g,this.notifyChange("state"),this._emitThumbDragEvent({index:g,state:"start",value:f});const v=this.values[g];f!==v&&this._emitThumbDragEvent({index:g,state:"drag",value:v}),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove)}_onTrackPointerMove(e){e.preventDefault(),this._dragged=!0}_onTrackPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointermove",this._onTrackPointerMove),document.removeEventListener("pointerup",this._onTrackPointerUp),this.snapOnClickEnabled||(this._dragged=!1),!this._dragged){const t=this._getCursorPositionFromEvent(e),i=this._valueFromPosition(t);this._emitTrackClickEvent({value:i})}}_onSegmentPointerDown(e){var r,d;e.preventDefault();const t=e.target,i=t["data-segment-index"],n=t["data-min-thumb-index"],o=t["data-max-thumb-index"];if(this._isDisabled()||L(n)||L(o))return;e.stopPropagation(),this._storeTrackDimensions(),document.addEventListener("pointerup",this._onSegmentPointerUp);const s=this._getAnchorDetails(n),a=this._getAnchorDetails(o);this.syncedSegmentsEnabled?(this.segmentElements.forEach(u=>u.classList.add(b.segmentElementActive)),this._anchorElements.forEach(u=>u.classList.add(b.anchorElementActive))):(this.segmentElements.getItemAt(i).classList.add(b.segmentElementActive),(r=this._anchorElements[s.index])==null||r.classList.add(b.anchorElementActive),(d=this._anchorElements[a.index])==null||d.classList.add(b.anchorElementActive)),this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(e),index:i,details:this._normalizeSegmentDetails({min:s,max:a})},this.draggableSegmentsEnabled&&(document.addEventListener("pointermove",this._onSegmentPointerMove),this.notifyChange("state"),this._emitSegmentDragEvent({index:i,state:"start",thumbIndices:[n,o]}))}_onSegmentPointerMove(e){if(!this._segmentDragStartInfo)return;e.preventDefault();const{_trackHeight:t,_trackWidth:i,_segmentDragStartInfo:{index:n,cursorPosition:o,details:{min:s,max:a}}}=this,{index:r,position:d,value:u}=s,{index:c,position:m,value:g}=a;this._dragged=!0;const f=this._getCursorPositionFromEvent(e);if(f===o)return;const _=this._positionToPercent(o),v=this._positionToPercent(f)-_,y=this._positionToPercent(d)+v,E=this._positionToPercent(m)+v,{min:C}=this._getAnchorBoundsAsPercents(r),{max:M}=this._getAnchorBoundsAsPercents(c);let w=!1,P=!1;if(y<C?w=!0:E>M&&(P=!0),w){const{min:V,max:ie}=this.viewModel.getBoundsForValueAtIndex(r),ne=this._isPositionInverted()?ie:V,W=ne,K=g+(ne-u),Ee=K-this.values[c];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Ee):this._updateAnchorValues([r,c],[W,K]))}if(P){const{min:V,max:ie}=this.viewModel.getBoundsForValueAtIndex(c),ne=this._isPositionInverted()?V:ie,W=ne,K=u+(ne-g),Ee=K-this.values[r];return void(this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(Ee):this._updateAnchorValues([r,c],[K,W]))}const D=this._isHorizontalLayout()?i:t,T=E/100*D,F=y/100*D,N=this.values,$=[N[r],N[c]],B=this._getValueForAnchorAtPosition(r,F),te=this._getValueForAnchorAtPosition(c,T);this.syncedSegmentsEnabled?this._updateAnchorValuesByDifference(B-$[0]):this._updateAnchorValues([r,c],[B,te]),[this.values[r],this.values[c]].every((V,ie)=>V===$[ie])||this._emitSegmentDragEvent({index:n,state:"drag",thumbIndices:[r,c]})}_onSegmentPointerUp(e){if(e.preventDefault(),document.removeEventListener("pointerup",this._onSegmentPointerUp),document.removeEventListener("pointermove",this._onSegmentPointerMove),!this._segmentDragStartInfo)return;const{_dragged:t,max:i,min:n,values:o}=this,{index:s,details:{min:{index:a},max:{index:r}}}=this._segmentDragStartInfo;if(this.segmentElements.forEach(d=>d.classList.remove(b.segmentElementActive)),this._anchorElements.forEach(d=>d.classList.remove(b.anchorElementActive)),this.draggableSegmentsEnabled){const d=i-n,u=o[a],c=o[r];this._lastMovedHandleIndex=u===c?u>d/2?a:r:null,this._dragged=!1,this._segmentDragStartInfo=null,this.notifyChange("state"),this._emitSegmentDragEvent({index:s,state:"stop",thumbIndices:[a,r]})}if(!t){const d=this._getCursorPositionFromEvent(e),u=this._valueFromPosition(d);this._emitSegmentClickEvent({index:s,value:u,thumbIndices:[a,r]})}}_onTickGroupClick(e){const t=e.target;if(t["data-config"]){const i=t["data-tick-config-index"],n=t["data-tick-group-index"],o=t["data-value"];this._emitTickClickEvent({configIndex:i,groupIndex:n,value:o})}}_storeTrackDimensions(){if(this.trackElement){const e=this._getDimensions(this.trackElement);this._trackHeight=e.height,this._trackWidth=e.width}}_onLabelPointerDown(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove))}_onLabelPointerMove(){this._isDisabled()||(this._dragged=!0)}_onLabelPointerUp(e){if(this._isDisabled())return;const t=e.target["data-thumb-index"];this.labelInputsEnabled&&!this._dragged&&I(t)&&(this._activeLabelInputIndex=t),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove)}_onLabelInputBlur(e){const{_activeLabelInputIndex:t,values:i,viewModel:n}=this,o=e.target.value;if(this._activeLabelInputIndex=null,this.notifyChange("state"),!o)return;const s=this._parseInputValue(o,"value",t),a=i[t],{min:r,max:d}=this.viewModel.getBoundsForValueAtIndex(t);if(s<r||s>d)return;n.setValue(t,s);const u=this.values[t];a!==u&&this._emitThumbChangeEvent({index:t,oldValue:a,value:u})}_onInputKeyDown(e){if(this._isDisabled())return;const{target:t}=e,i=De(e),{hideInput1:n,hideInput2:o,hideInput3:s}=Z,{_activeLabelInputIndex:a,_anchorElements:r}=this,d=t;if(i===n||i===o||i===s){e.stopPropagation();const u=a;d.blur(),I(u)?r[u].focus():d.parentElement.focus()}}_onMaxLabelClick(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"max-click",value:this.max}),this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state")))}_onMaxLabelKeyDown(e){this._isDisabled()||De(e)!==Z.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"))}_onMaxInputBlur(e){const t=e.target.value;if(this._isMaxInputActive=!1,this.notifyChange("state"),!t)return;const i=this.max,n=this._parseInputValue(t,"max");n<=this.min||(this.viewModel.set("max",n),this.max!==i&&this._emitMaxChangeEvent({oldValue:i,value:this.max}))}_onMinLabelClick(){this._isDisabled()||(this._emitRangeLabelClickEvent({type:"min-click",value:this.min}),this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state")))}_onMinLabelKeyDown(e){this._isDisabled()||De(e)!==Z.showInput||(this._isMinInputActive=!0,this.notifyChange("state"))}_onMinInputBlur(e){const t=e.target.value;if(this._isMinInputActive=!1,this.notifyChange("state"),!t)return;const i=this.min,n=this._parseInputValue(t,"min");n>=this.max||(this.viewModel.set("min",n),this.min!==i&&this._emitMinChangeEvent({oldValue:i,value:this.min}))}_isDisabled(){return this.disabled||this.state==="disabled"}_positionFromValue(e){const{max:t,min:i}=this,n=t-i;if(n===0)return 0;const{_trackHeight:o,_trackWidth:s}=this,a=this._isHorizontalLayout();let r=parseFloat(a?(s*(e-i)/n).toFixed(2):(o*(t-e)/n).toFixed(2));return this._isReversedLayout()&&(r=a?s-r:o-r),r}_valueFromPosition(e){const{_trackHeight:t,_trackWidth:i,max:n,min:o,precision:s}=this,a=n-o;let r=this._isHorizontalLayout()?e*a/i+o:a*(1e3-e/t*1e3)/1e3+o;return this._isReversedLayout()&&(r=n+o-r),parseFloat(r.toFixed(s))}_positionToPercent(e){const{_trackHeight:t,_trackWidth:i}=this,n=100*e/(this._isHorizontalLayout()?i:t);return this._applyPrecisionToPosition(n)}_applyPrecisionToPosition(e){return parseFloat(e.toFixed(this._positionPrecision))}_isPositionInverted(){const{layout:e}=this;return e==="horizontal-reversed"||e==="vertical"}_isHorizontalLayout(){return this.layout.includes("horizontal")}_isReversedLayout(){return this.layout.includes("reversed")}_normalizeSegmentDetails(e){if(this._isPositionInverted()){const{min:t,max:i}=e;return{min:i,max:t}}return e}_parseInputValue(e,t,i){return this.inputParseFunction?this.inputParseFunction(e,t,i):this.viewModel.defaultInputParseFunction(e)}_formatInputValue(e,t,i){return this.inputFormatFunction?this.inputFormatFunction(e,t,i):this.viewModel.defaultInputFormatFunction(e)}_getAnchorDetails(e){const t=[...this.values].sort((n,o)=>n-o)[e],i=this.values.indexOf(t);return{index:i,position:this._getPositionOfElement(this._anchorElements[i]),value:t}}_updateAnchorStyle(e,t){const i=this._anchorElements[e];i&&(this._isHorizontalLayout()?i.style.left=`${t}`:i.style.top=`${t}`)}_getStyleForAnchor(e,t,i){const n=this._getPositionStyleForElement(e);if(this.values.length===1)return`${n}`;const o=this._zIndices[t];return`${n}; z-index: ${i?this._zIndexOffset+o:o}`}_getPositionStyleForElement(e){const t=this._positionFromValue(e),i=this._positionToPercent(t);return`${this._isHorizontalLayout()?"left":"top"}: ${i+"%"}`}_getPositionOfElement(e){const t=this._getDimensions(e.offsetParent),i=this._getDimensions(e);return this._isHorizontalLayout()?this._applyPrecisionToPosition(i.left-t.left):this._applyPrecisionToPosition(i.top-t.top)}_updateAnchorValues(e,t){e.forEach((i,n)=>this._toValue(i,t[n]))}_updateAnchorValuesByDifference(e){const{min:t,max:i,values:n}=this;n.forEach((o,s)=>this._toValue(s,Math.max(Math.min(o+e,i),t)))}_toValue(e,t){I(this.steps)&&(t=this._getStepValues()[this._getIndexOfNearestStepValue(t)]),this._updateAnchorStyle(e,this._getPositionStyleForElement(t)),this.viewModel.setValue(e,t)}_toPosition(e,t){const i=I(this.steps)?this._getStepValueForAnchorAtPosition(e,t):this._getValueForAnchorAtPosition(e,t);this._updateAnchorStyle(e,this._getPositionStyleForElement(i)),this.viewModel.setValue(e,i)}_getValueForAnchorAtPosition(e,t){const{min:i,max:n}=this._getAnchorBoundsInPixels(e),{min:o,max:s}=this.viewModel.getBoundsForValueAtIndex(e);let a,r,d=null;return this._isPositionInverted()?(a=o,r=s):(a=s,r=o),d=t>n?a:t<i?r:this._valueFromPosition(t),d>s?d=s:d<o&&(d=o),d}_getStepValueForAnchorAtPosition(e,t){const i=this._getStepValues(),n=this._calculateNearestStepPosition(t),o=this._getValueForAnchorAtPosition(e,n);return i[this._getIndexOfNearestStepValue(o)]}_getAnchorBoundsAsPercents(e){const{min:t,max:i}=this._getAnchorBoundsInPixels(e);return{min:this._positionToPercent(t),max:this._positionToPercent(i)}}_getAnchorBoundsInPixels(e){const{_anchorElements:t,_trackHeight:i,_trackWidth:n,effectiveMax:o,effectiveMin:s,thumbsConstrained:a}=this,r=t[e-1],d=t[e+1],u=this._isHorizontalLayout()?n:i;let c,m;return this._isPositionInverted()?(c=I(s)?this._positionFromValue(s):u,m=I(o)?this._positionFromValue(o):0):(c=I(o)?this._positionFromValue(o):u,m=I(s)?this._positionFromValue(s):0),a?this._isPositionInverted()?{max:r?this._getPositionOfElement(r):c,min:d?this._getPositionOfElement(d):m}:{max:d?this._getPositionOfElement(d):c,min:r?this._getPositionOfElement(r):m}:{max:c,min:m}}_getIndexOfNearestValue(e){return this.values.indexOf(this.values.reduce((t,i)=>Math.abs(i-e)<Math.abs(t-e)?i:t))}_getCursorPositionFromEvent(e){const t=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?e.clientX-t.left:e.clientY-t.top}_getStepValues(){const{steps:e}=this;if(Array.isArray(e))return e;const{max:t,min:i}=this,n=Math.ceil((t-i)/e),o=[];for(let s=0;s<=n;s++){const a=i+e*s;o.push(a>t?t:a)}return o}_toStep(e,t){const{values:i,viewModel:n}=this,o=i[e],s=this._getStepValues(),a=s.indexOf(o);let r=null;if(a>-1){let d=s[a+t];isNaN(d)&&(d=s[a]);const u=this._positionFromValue(d);r=this._getStepValueForAnchorAtPosition(e,u)}else r=s[this._getIndexOfNearestStepValue(o)+t];n.setValue(e,r)}_getIndexOfNearestStepValue(e){const{steps:t}=this;if(L(t))return null;const i=this._getStepValues(),n=i.reduce((o,s)=>Math.abs(s-e)<Math.abs(o-e)?s:o);return i.indexOf(n)}_calculateNearestStepPosition(e){const t=this._valueFromPosition(e),i=this._getIndexOfNearestStepValue(t),n=this._getStepValues();return this._positionFromValue(n[i])}_getTickCounts(e,t){const{mode:i}=t;return i==="count"||i==="position"?e||0:i==="percent"&&100/e||0}_calculateTickPositions(e){return e.map(t=>this._positionFromValue(t))}_calculateEquidistantTickPositions(e){const{_trackWidth:t,_trackHeight:i}=this,n=this._isHorizontalLayout()?t:i,o=n/(e-1),s=[];if(e===1)return[n/2];for(let a=0;a<e;a++){const r=a*o;r<=n&&s.push(r)}return s}_getDimensions(e){try{return e.getBoundingClientRect()}catch(t){if(typeof t=="object"&&t!==null)return new DOMRect(0,0,0,0);throw t}}_emitTrackClickEvent(e){this.emit("track-click",{...e,type:"track-click"})}_emitTickClickEvent(e){this.emit("tick-click",{...e,type:"tick-click"})}_emitMaxChangeEvent(e){this.emit("max-change",{...e,type:"max-change"})}_emitMinChangeEvent(e){this.emit("min-change",{...e,type:"min-change"})}_emitThumbChangeEvent(e){this.emit("thumb-change",{...e,type:"thumb-change"})}_emitThumbClickEvent(e){this.emit("thumb-click",{...e,type:"thumb-click"})}_emitThumbDragEvent(e){this.emit("thumb-drag",{...e,type:"thumb-drag"})}_emitSegmentClickEvent(e){this.emit("segment-click",{...e,type:"segment-click"})}_emitSegmentDragEvent(e){this.emit("segment-drag",{...e,type:"segment-drag"})}_emitRangeLabelClickEvent(e){this.emit(e.type,{...e})}};l([h()],x.prototype,"disabled",void 0),l([h()],x.prototype,"draggableSegmentsEnabled",void 0),l([h()],x.prototype,"effectiveMax",null),l([h()],x.prototype,"effectiveMin",null),l([h({readOnly:!0})],x.prototype,"effectiveSegmentElements",void 0),l([h()],x.prototype,"extraNodes",void 0),l([h()],x.prototype,"inputCreatedFunction",void 0),l([h()],x.prototype,"inputFormatFunction",null),l([h()],x.prototype,"inputParseFunction",null),l([h()],x.prototype,"label",null),l([h({readOnly:!0})],x.prototype,"labelElements",void 0),l([h()],x.prototype,"labelInputsEnabled",void 0),l([h()],x.prototype,"labelFormatFunction",null),l([h({readOnly:!0})],x.prototype,"labels",null),l([h({value:"horizontal"})],x.prototype,"layout",null),l([h()],x.prototype,"max",null),l([h({readOnly:!0})],x.prototype,"maxLabelElement",void 0),l([h(),Ae("esri/widgets/Slider/t9n/Slider")],x.prototype,"messages",void 0),l([h()],x.prototype,"min",null),l([h({readOnly:!0})],x.prototype,"minLabelElement",void 0),l([h()],x.prototype,"precision",null),l([h()],x.prototype,"rangeLabelInputsEnabled",void 0),l([h({readOnly:!0})],x.prototype,"segmentElements",void 0),l([h()],x.prototype,"snapOnClickEnabled",void 0),l([h({readOnly:!0})],x.prototype,"state",null),l([h()],x.prototype,"steps",void 0),l([h()],x.prototype,"syncedSegmentsEnabled",void 0),l([h()],x.prototype,"thumbsConstrained",null),l([h()],x.prototype,"thumbCreatedFunction",void 0),l([h({readOnly:!0})],x.prototype,"thumbElements",void 0),l([h()],x.prototype,"tickConfigs",null),l([h({readOnly:!0})],x.prototype,"tickElements",void 0),l([h({readOnly:!0})],x.prototype,"trackElement",void 0),l([h()],x.prototype,"values",null),l([h()],x.prototype,"viewModel",void 0),l([h()],x.prototype,"visibleElements",void 0),l([an("visibleElements")],x.prototype,"castVisibleElements",null),x=l([X(Kn)],x);const Yn=x;function le(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Le(e){var t=le(e).Element;return e instanceof t||e instanceof Element}function se(e){var t=le(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jt(e){if(typeof ShadowRoot>"u")return!1;var t=le(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Ie=Math.max,xt=Math.min,Re=Math.round;function Ft(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Li(){return!/^((?!chrome|android).)*safari/i.test(Ft())}function He(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var n=e.getBoundingClientRect(),o=1,s=1;t&&se(e)&&(o=e.offsetWidth>0&&Re(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Re(n.height)/e.offsetHeight||1);var a=Le(e)?le(e):window,r=a.visualViewport,d=!Li()&&i,u=(n.left+(d&&r?r.offsetLeft:0))/o,c=(n.top+(d&&r?r.offsetTop:0))/s,m=n.width/o,g=n.height/s;return{width:m,height:g,top:c,right:u+m,bottom:c+g,left:u,x:u,y:c}}function Wt(e){var t=le(e),i=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:i,scrollTop:n}}function qn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Gn(e){return e===le(e)||!se(e)?Wt(e):qn(e)}function ge(e){return e?(e.nodeName||"").toLowerCase():null}function Ce(e){return((Le(e)?e.ownerDocument:e.document)||window.document).documentElement}function Kt(e){return He(Ce(e)).left+Wt(e).scrollLeft}function we(e){return le(e).getComputedStyle(e)}function Yt(e){var t=we(e),i=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+n)}function Xn(e){var t=e.getBoundingClientRect(),i=Re(t.width)/e.offsetWidth||1,n=Re(t.height)/e.offsetHeight||1;return i!==1||n!==1}function Jn(e,t,i){i===void 0&&(i=!1);var n=se(t),o=se(t)&&Xn(t),s=Ce(t),a=He(e,o,i),r={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!i)&&((ge(t)!=="body"||Yt(s))&&(r=Gn(t)),se(t)?(d=He(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):s&&(d.x=Kt(s))),{x:a.left+r.scrollLeft-d.x,y:a.top+r.scrollTop-d.y,width:a.width,height:a.height}}function qt(e){var t=He(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function Pt(e){return ge(e)==="html"?e:e.assignedSlot||e.parentNode||(jt(e)?e.host:null)||Ce(e)}function $i(e){return["html","body","#document"].indexOf(ge(e))>=0?e.ownerDocument.body:se(e)&&Yt(e)?e:$i(Pt(e))}function tt(e,t){var i;t===void 0&&(t=[]);var n=$i(e),o=n===((i=e.ownerDocument)==null?void 0:i.body),s=le(n),a=o?[s].concat(s.visualViewport||[],Yt(n)?n:[]):n,r=t.concat(a);return o?r:r.concat(tt(Pt(a)))}function Zn(e){return["table","td","th"].indexOf(ge(e))>=0}function ci(e){return!se(e)||we(e).position==="fixed"?null:e.offsetParent}function Qn(e){var t=/firefox/i.test(Ft()),i=/Trident/i.test(Ft());if(i&&se(e)){var n=we(e);if(n.position==="fixed")return null}var o=Pt(e);for(jt(o)&&(o=o.host);se(o)&&["html","body"].indexOf(ge(o))<0;){var s=we(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function ht(e){for(var t=le(e),i=ci(e);i&&Zn(i)&&we(i).position==="static";)i=ci(i);return i&&(ge(i)==="html"||ge(i)==="body"&&we(i).position==="static")?t:i||Qn(e)||t}var Q="top",re="bottom",ae="right",ee="left",Gt="auto",ct=[Q,re,ae,ee],Be="start",rt="end",eo="clippingParents",zi="viewport",Ge="popper",to="reference",ui=ct.reduce(function(e,t){return e.concat([t+"-"+Be,t+"-"+rt])},[]),Fi=[].concat(ct,[Gt]).reduce(function(e,t){return e.concat([t,t+"-"+Be,t+"-"+rt])},[]),io="beforeRead",no="read",oo="afterRead",so="beforeMain",ro="main",ao="afterMain",lo="beforeWrite",ho="write",co="afterWrite",uo=[io,no,oo,so,ro,ao,lo,ho,co];function po(e){var t=new Map,i=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function o(s){i.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(r){if(!i.has(r)){var d=t.get(r);d&&o(d)}}),n.push(s)}return e.forEach(function(s){i.has(s.name)||o(s)}),n}function mo(e){var t=po(e);return uo.reduce(function(i,n){return i.concat(t.filter(function(o){return o.phase===n}))},[])}function fo(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function fe(e){return e.split("-")[0]}function go(e){var t=e.reduce(function(i,n){var o=i[n.name];return i[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,i},{});return Object.keys(t).map(function(i){return t[i]})}function vo(e,t){var i=le(e),n=Ce(e),o=i.visualViewport,s=n.clientWidth,a=n.clientHeight,r=0,d=0;if(o){s=o.width,a=o.height;var u=Li();(u||!u&&t==="fixed")&&(r=o.offsetLeft,d=o.offsetTop)}return{width:s,height:a,x:r+Kt(e),y:d}}function _o(e){var t,i=Ce(e),n=Wt(e),o=(t=e.ownerDocument)==null?void 0:t.body,s=Ie(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Ie(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),r=-n.scrollLeft+Kt(e),d=-n.scrollTop;return we(o||i).direction==="rtl"&&(r+=Ie(i.clientWidth,o?o.clientWidth:0)-s),{width:s,height:a,x:r,y:d}}function Ni(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&jt(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Nt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function yo(e,t){var i=He(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function pi(e,t,i){return t===zi?Nt(vo(e,i)):Le(t)?yo(t,i):Nt(_o(Ce(e)))}function bo(e){var t=tt(Pt(e)),i=["absolute","fixed"].indexOf(we(e).position)>=0,n=i&&se(e)?ht(e):e;return Le(n)?t.filter(function(o){return Le(o)&&Ni(o,n)&&ge(o)!=="body"}):[]}function wo(e,t,i,n){var o=t==="clippingParents"?bo(e):[].concat(t),s=[].concat(o,[i]),a=s[0],r=s.reduce(function(d,u){var c=pi(e,u,n);return d.top=Ie(c.top,d.top),d.right=xt(c.right,d.right),d.bottom=xt(c.bottom,d.bottom),d.left=Ie(c.left,d.left),d},pi(e,a,n));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function Ue(e){return e.split("-")[1]}function Xt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Vi(e){var t=e.reference,i=e.element,n=e.placement,o=n?fe(n):null,s=n?Ue(n):null,a=t.x+t.width/2-i.width/2,r=t.y+t.height/2-i.height/2,d;switch(o){case Q:d={x:a,y:t.y-i.height};break;case re:d={x:a,y:t.y+t.height};break;case ae:d={x:t.x+t.width,y:r};break;case ee:d={x:t.x-i.width,y:r};break;default:d={x:t.x,y:t.y}}var u=o?Xt(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Be:d[u]=d[u]-(t[c]/2-i[c]/2);break;case rt:d[u]=d[u]+(t[c]/2-i[c]/2);break}}return d}function Ri(){return{top:0,right:0,bottom:0,left:0}}function Hi(e){return Object.assign({},Ri(),e)}function Bi(e,t){return t.reduce(function(i,n){return i[n]=e,i},{})}function at(e,t){t===void 0&&(t={});var i=t,n=i.placement,o=n===void 0?e.placement:n,s=i.strategy,a=s===void 0?e.strategy:s,r=i.boundary,d=r===void 0?eo:r,u=i.rootBoundary,c=u===void 0?zi:u,m=i.elementContext,g=m===void 0?Ge:m,f=i.altBoundary,_=f===void 0?!1:f,v=i.padding,y=v===void 0?0:v,E=Hi(typeof y!="number"?y:Bi(y,ct)),C=g===Ge?to:Ge,M=e.rects.popper,w=e.elements[_?C:g],P=wo(Le(w)?w:w.contextElement||Ce(e.elements.popper),d,c,a),D=He(e.elements.reference),T=Vi({reference:D,element:M,strategy:"absolute",placement:o}),F=Nt(Object.assign({},M,T)),N=g===Ge?F:D,$={top:P.top-N.top+E.top,bottom:N.bottom-P.bottom+E.bottom,left:P.left-N.left+E.left,right:N.right-P.right+E.right},B=e.modifiersData.offset;if(g===Ge&&B){var te=B[o];Object.keys($).forEach(function(V){var ie=[ae,re].indexOf(V)>=0?1:-1,ne=[Q,re].indexOf(V)>=0?"y":"x";$[V]+=te[ne]*ie})}return $}var mi={placement:"bottom",modifiers:[],strategy:"absolute"};function fi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function xo(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,n=i===void 0?[]:i,o=t.defaultOptions,s=o===void 0?mi:o;return function(r,d,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},mi,s),modifiersData:{},elements:{reference:r,popper:d},attributes:{},styles:{}},m=[],g=!1,f={state:c,setOptions:function(E){var C=typeof E=="function"?E(c.options):E;v(),c.options=Object.assign({},s,c.options,C),c.scrollParents={reference:Le(r)?tt(r):r.contextElement?tt(r.contextElement):[],popper:tt(d)};var M=mo(go([].concat(n,c.options.modifiers)));return c.orderedModifiers=M.filter(function(w){return w.enabled}),_(),f.update()},forceUpdate:function(){if(!g){var E=c.elements,C=E.reference,M=E.popper;if(fi(C,M)){c.rects={reference:Jn(C,ht(M),c.options.strategy==="fixed"),popper:qt(M)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function($){return c.modifiersData[$.name]=Object.assign({},$.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var P=c.orderedModifiers[w],D=P.fn,T=P.options,F=T===void 0?{}:T,N=P.name;typeof D=="function"&&(c=D({state:c,options:F,name:N,instance:f})||c)}}}},update:fo(function(){return new Promise(function(y){f.forceUpdate(),y(c)})}),destroy:function(){v(),g=!0}};if(!fi(r,d))return f;f.setOptions(u).then(function(y){!g&&u.onFirstUpdate&&u.onFirstUpdate(y)});function _(){c.orderedModifiers.forEach(function(y){var E=y.name,C=y.options,M=C===void 0?{}:C,w=y.effect;if(typeof w=="function"){var P=w({state:c,name:E,instance:f,options:M}),D=function(){};m.push(P||D)}})}function v(){m.forEach(function(y){return y()}),m=[]}return f}}var _t={passive:!0};function Eo(e){var t=e.state,i=e.instance,n=e.options,o=n.scroll,s=o===void 0?!0:o,a=n.resize,r=a===void 0?!0:a,d=le(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",i.update,_t)}),r&&d.addEventListener("resize",i.update,_t),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",i.update,_t)}),r&&d.removeEventListener("resize",i.update,_t)}}const ko={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Eo,data:{}};function Po(e){var t=e.state,i=e.name;t.modifiersData[i]=Vi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Do={name:"popperOffsets",enabled:!0,phase:"read",fn:Po,data:{}};var Co={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Oo(e){var t=e.x,i=e.y,n=window,o=n.devicePixelRatio||1;return{x:Re(t*o)/o||0,y:Re(i*o)/o||0}}function gi(e){var t,i=e.popper,n=e.popperRect,o=e.placement,s=e.variation,a=e.offsets,r=e.position,d=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,m=e.isFixed,g=a.x,f=g===void 0?0:g,_=a.y,v=_===void 0?0:_,y=typeof c=="function"?c({x:f,y:v}):{x:f,y:v};f=y.x,v=y.y;var E=a.hasOwnProperty("x"),C=a.hasOwnProperty("y"),M=ee,w=Q,P=window;if(u){var D=ht(i),T="clientHeight",F="clientWidth";if(D===le(i)&&(D=Ce(i),we(D).position!=="static"&&r==="absolute"&&(T="scrollHeight",F="scrollWidth")),D=D,o===Q||(o===ee||o===ae)&&s===rt){w=re;var N=m&&D===P&&P.visualViewport?P.visualViewport.height:D[T];v-=N-n.height,v*=d?1:-1}if(o===ee||(o===Q||o===re)&&s===rt){M=ae;var $=m&&D===P&&P.visualViewport?P.visualViewport.width:D[F];f-=$-n.width,f*=d?1:-1}}var B=Object.assign({position:r},u&&Co),te=c===!0?Oo({x:f,y:v}):{x:f,y:v};if(f=te.x,v=te.y,d){var V;return Object.assign({},B,(V={},V[w]=C?"0":"",V[M]=E?"0":"",V.transform=(P.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",V))}return Object.assign({},B,(t={},t[w]=C?v+"px":"",t[M]=E?f+"px":"",t.transform="",t))}function So(e){var t=e.state,i=e.options,n=i.gpuAcceleration,o=n===void 0?!0:n,s=i.adaptive,a=s===void 0?!0:s,r=i.roundOffsets,d=r===void 0?!0:r,u={placement:fe(t.placement),variation:Ue(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,gi(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,gi(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Mo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:So,data:{}};function To(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var n=t.styles[i]||{},o=t.attributes[i]||{},s=t.elements[i];!se(s)||!ge(s)||(Object.assign(s.style,n),Object.keys(o).forEach(function(a){var r=o[a];r===!1?s.removeAttribute(a):s.setAttribute(a,r===!0?"":r)}))})}function Io(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],s=t.attributes[n]||{},a=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:i[n]),r=a.reduce(function(d,u){return d[u]="",d},{});!se(o)||!ge(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(d){o.removeAttribute(d)}))})}}const Ao={name:"applyStyles",enabled:!0,phase:"write",fn:To,effect:Io,requires:["computeStyles"]};function Lo(e,t,i){var n=fe(e),o=[ee,Q].indexOf(n)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,a=s[0],r=s[1];return a=a||0,r=(r||0)*o,[ee,ae].indexOf(n)>=0?{x:r,y:a}:{x:a,y:r}}function $o(e){var t=e.state,i=e.options,n=e.name,o=i.offset,s=o===void 0?[0,0]:o,a=Fi.reduce(function(c,m){return c[m]=Lo(m,t.rects,s),c},{}),r=a[t.placement],d=r.x,u=r.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=a}const zo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$o};var Fo={left:"right",right:"left",bottom:"top",top:"bottom"};function wt(e){return e.replace(/left|right|bottom|top/g,function(t){return Fo[t]})}var No={start:"end",end:"start"};function vi(e){return e.replace(/start|end/g,function(t){return No[t]})}function Vo(e,t){t===void 0&&(t={});var i=t,n=i.placement,o=i.boundary,s=i.rootBoundary,a=i.padding,r=i.flipVariations,d=i.allowedAutoPlacements,u=d===void 0?Fi:d,c=Ue(n),m=c?r?ui:ui.filter(function(_){return Ue(_)===c}):ct,g=m.filter(function(_){return u.indexOf(_)>=0});g.length===0&&(g=m);var f=g.reduce(function(_,v){return _[v]=at(e,{placement:v,boundary:o,rootBoundary:s,padding:a})[fe(v)],_},{});return Object.keys(f).sort(function(_,v){return f[_]-f[v]})}function Ro(e){if(fe(e)===Gt)return[];var t=wt(e);return[vi(e),t,vi(t)]}function Ho(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=i.mainAxis,s=o===void 0?!0:o,a=i.altAxis,r=a===void 0?!0:a,d=i.fallbackPlacements,u=i.padding,c=i.boundary,m=i.rootBoundary,g=i.altBoundary,f=i.flipVariations,_=f===void 0?!0:f,v=i.allowedAutoPlacements,y=t.options.placement,E=fe(y),C=E===y,M=d||(C||!_?[wt(y)]:Ro(y)),w=[y].concat(M).reduce(function($e,ke){return $e.concat(fe(ke)===Gt?Vo(t,{placement:ke,boundary:c,rootBoundary:m,padding:u,flipVariations:_,allowedAutoPlacements:v}):ke)},[]),P=t.rects.reference,D=t.rects.popper,T=new Map,F=!0,N=w[0],$=0;$<w.length;$++){var B=w[$],te=fe(B),V=Ue(B)===Be,ie=[Q,re].indexOf(te)>=0,ne=ie?"width":"height",W=at(t,{placement:B,boundary:c,rootBoundary:m,altBoundary:g,padding:u}),K=ie?V?ae:ee:V?re:Q;P[ne]>D[ne]&&(K=wt(K));var Ee=wt(K),Oe=[];if(s&&Oe.push(W[te]<=0),r&&Oe.push(W[K]<=0,W[Ee]<=0),Oe.every(function($e){return $e})){N=B,F=!1;break}T.set(B,Oe)}if(F)for(var ut=_?3:1,Ct=function(ke){var qe=w.find(function(mt){var Se=T.get(mt);if(Se)return Se.slice(0,ke).every(function(Ot){return Ot})});if(qe)return N=qe,"break"},Ye=ut;Ye>0;Ye--){var pt=Ct(Ye);if(pt==="break")break}t.placement!==N&&(t.modifiersData[n]._skip=!0,t.placement=N,t.reset=!0)}}const Bo={name:"flip",enabled:!0,phase:"main",fn:Ho,requiresIfExists:["offset"],data:{_skip:!1}};function Uo(e){return e==="x"?"y":"x"}function it(e,t,i){return Ie(e,xt(t,i))}function jo(e,t,i){var n=it(e,t,i);return n>i?i:n}function Wo(e){var t=e.state,i=e.options,n=e.name,o=i.mainAxis,s=o===void 0?!0:o,a=i.altAxis,r=a===void 0?!1:a,d=i.boundary,u=i.rootBoundary,c=i.altBoundary,m=i.padding,g=i.tether,f=g===void 0?!0:g,_=i.tetherOffset,v=_===void 0?0:_,y=at(t,{boundary:d,rootBoundary:u,padding:m,altBoundary:c}),E=fe(t.placement),C=Ue(t.placement),M=!C,w=Xt(E),P=Uo(w),D=t.modifiersData.popperOffsets,T=t.rects.reference,F=t.rects.popper,N=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,$=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,te={x:0,y:0};if(D){if(s){var V,ie=w==="y"?Q:ee,ne=w==="y"?re:ae,W=w==="y"?"height":"width",K=D[w],Ee=K+y[ie],Oe=K-y[ne],ut=f?-F[W]/2:0,Ct=C===Be?T[W]:F[W],Ye=C===Be?-F[W]:-T[W],pt=t.elements.arrow,$e=f&&pt?qt(pt):{width:0,height:0},ke=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ri(),qe=ke[ie],mt=ke[ne],Se=it(0,T[W],$e[W]),Ot=M?T[W]/2-ut-Se-qe-$.mainAxis:Ct-Se-qe-$.mainAxis,Yi=M?-T[W]/2+ut+Se+mt+$.mainAxis:Ye+Se+mt+$.mainAxis,St=t.elements.arrow&&ht(t.elements.arrow),qi=St?w==="y"?St.clientTop||0:St.clientLeft||0:0,Jt=(V=B==null?void 0:B[w])!=null?V:0,Gi=K+Ot-Jt-qi,Xi=K+Yi-Jt,Zt=it(f?xt(Ee,Gi):Ee,K,f?Ie(Oe,Xi):Oe);D[w]=Zt,te[w]=Zt-K}if(r){var Qt,Ji=w==="x"?Q:ee,Zi=w==="x"?re:ae,Me=D[P],ft=P==="y"?"height":"width",ei=Me+y[Ji],ti=Me-y[Zi],Mt=[Q,ee].indexOf(E)!==-1,ii=(Qt=B==null?void 0:B[P])!=null?Qt:0,ni=Mt?ei:Me-T[ft]-F[ft]-ii+$.altAxis,oi=Mt?Me+T[ft]+F[ft]-ii-$.altAxis:ti,si=f&&Mt?jo(ni,Me,oi):it(f?ni:ei,Me,f?oi:ti);D[P]=si,te[P]=si-Me}t.modifiersData[n]=te}}const Ko={name:"preventOverflow",enabled:!0,phase:"main",fn:Wo,requiresIfExists:["offset"]};var Yo=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Hi(typeof t!="number"?t:Bi(t,ct))};function qo(e){var t,i=e.state,n=e.name,o=e.options,s=i.elements.arrow,a=i.modifiersData.popperOffsets,r=fe(i.placement),d=Xt(r),u=[ee,ae].indexOf(r)>=0,c=u?"height":"width";if(!(!s||!a)){var m=Yo(o.padding,i),g=qt(s),f=d==="y"?Q:ee,_=d==="y"?re:ae,v=i.rects.reference[c]+i.rects.reference[d]-a[d]-i.rects.popper[c],y=a[d]-i.rects.reference[d],E=ht(s),C=E?d==="y"?E.clientHeight||0:E.clientWidth||0:0,M=v/2-y/2,w=m[f],P=C-g[c]-m[_],D=C/2-g[c]/2+M,T=it(w,D,P),F=d;i.modifiersData[n]=(t={},t[F]=T,t.centerOffset=T-D,t)}}function Go(e){var t=e.state,i=e.options,n=i.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Ni(t.elements.popper,o)&&(t.elements.arrow=o))}const Xo={name:"arrow",enabled:!0,phase:"main",fn:qo,effect:Go,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _i(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function yi(e){return[Q,ae,re,ee].some(function(t){return e[t]>=0})}function Jo(e){var t=e.state,i=e.name,n=t.rects.reference,o=t.rects.popper,s=t.modifiersData.preventOverflow,a=at(t,{elementContext:"reference"}),r=at(t,{altBoundary:!0}),d=_i(a,n),u=_i(r,o,s),c=yi(d),m=yi(u);t.modifiersData[i]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":m})}const Zo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Jo};var Qo=[ko,Do,Mo,Ao,zo,Bo,Ko,Xo,Zo],es=xo({defaultModifiers:Qo});const ts=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],bi={base:"esri-popover",open:"esri-popover--open"},is={position:"fixed","z-index":"1000"};let ue=class extends Ke{constructor(e,t){super(e,t),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=i=>{this._rootNode=i},this._afterContentCreate=i=>{this._contentNode=i},this._updatePosition=()=>{I(this._popper)&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([j(()=>[this.open,this.anchorElement],()=>this._buildPopper(),st),j(()=>[this.placement,this.offset],()=>this._setPopperOptions(),st)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),I(this._rootNode)&&(pn(this._rootNode),this._rootNode=null),this._contentNode=null,I(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){ts.includes(e)?this._override("placement",e):this._clearOverride("placement")}get test(){return{rootNode:dn(this._rootNode)}}render(){var n;const{open:e,owner:t,renderContentFunction:i}=this;return p("div",{afterCreate:this._afterRootCreate,class:this.classes(bi.base,e?bi.open:null),styles:is,lang:bt()},p("div",{dir:mn((n=this.owner)==null?void 0:n.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(i==null?void 0:i.call(t))))}_buildPopper(){I(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(L(e)||!this.open||!this.renderContentFunction)return;const t=this._getAnchor();t&&(this._popper=es(t,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:t,_popper:i}=this;L(i)||(i.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:t}}]}),i.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return fn(typeof e=="function"?e():e)}};l([h()],ue.prototype,"anchorElement",void 0),l([h()],ue.prototype,"container",null),l([h()],ue.prototype,"offset",void 0),l([h()],ue.prototype,"open",void 0),l([h()],ue.prototype,"owner",null),l([h()],ue.prototype,"placement",null),l([h()],ue.prototype,"renderContentFunction",void 0),ue=l([X("esri.widgets.support.Popover")],ue);const Ui=ue,ve="esri-slider-with-dropdown",q={interactive:"esri-interactive",label:"esri-slider__label",box:`${ve}__box`,dropdownRoot:`${ve}__dropdown-root`,anchor:" esri-widget__anchor esri-slider-with-dropdown__anchor",anchorOpen:`${ve}__anchor--open`,anchorClosed:`${ve}__anchor--closed`,dropdownList:`${ve}__list`,dropdownListItem:`${ve}__list-item`,dropdownListItemSelected:`${ve}__list-item--selected`,boxDropDownOn:`${ve}__box--drop-down-on`,boxDropDownOff:`${ve}__box--drop-down-off`},yt={selectItem:"Enter",closeDropdown:"Escape",moveSelectionUp:"ArrowUp",moveSelectionDown:"ArrowDown"};let pe=class extends Yn{constructor(e,t){super(e,t),this.viewModel=new be,this.buttonTooltip="",this.showDropDown=!0,this._dropdownAnchor=null,this._dropdownElement=null,this._popover=new Ui({owner:this,placement:"bottom-start",anchorElement:()=>hn(this._dropdownAnchor),renderContentFunction:()=>this._renderPopover()})}initialize(){this.addHandles(j(()=>this.viewModel.isDropdownOpen,e=>{this._popover.open=e},st))}destroy(){this._popover.destroy()}get items(){return this.viewModel.items}set items(e){this.viewModel.items=e}get currentIndex(){return this.viewModel.currentIndex}set currentIndex(e){this.viewModel.currentIndex=e}get currentItem(){return this.viewModel.currentItem}get isDropdownOpen(){return this.viewModel.isDropdownOpen}renderThumbLabel(e){const t={[q.boxDropDownOn]:this.showDropDown,[q.boxDropDownOff]:!this.showDropDown};return p("div",{class:this.classes(q.box,q.label,t)},super.renderThumbLabel(e),this.showDropDown&&p("div",{bind:this,afterCreate:this._onDropdownAnchorAfterCreate,class:q.dropdownRoot},p("button",{class:this.classes(q.interactive,q.anchor,this.isDropdownOpen?q.anchorOpen:q.anchorClosed),bind:this,disabled:this.disabled,onclick:this._onAnchorClick,onpointerdown:this._killEvent,"aria-label":this.buttonTooltip,title:this.buttonTooltip,"aria-expanded":this.isDropdownOpen.toString(),"aria-haspopup":"listbox",type:"button"},this.currentItem?this.currentItem.name+" ":"")))}_onDropdownAnchorAfterCreate(e){this._dropdownAnchor=e}_renderPopover(){return p("ol",{role:"listbox",afterCreate:this._onDropdownAfterCreate,"aria-label":this.buttonTooltip,bind:this,class:this.classes(q.dropdownList),tabindex:"-1",onkeydown:this._onDropdownKeyDown,onfocusout:this._onDropdownFocusOut,onpointerdown:this._killEvent},this.items.map((e,t)=>p("li",{class:t===this.currentIndex?this.classes(q.interactive,q.dropdownListItem,q.dropdownListItemSelected):this.classes(q.interactive,q.dropdownListItem),bind:this,onclick:this._onDropdownItemClick,"data-result":t,"aria-label":e.label.join(" "),role:"option","aria-selected":(t===this.currentIndex).toString(),onkeydown:this._onLiKeyDown,tabindex:"0"},e.label.map(i=>p("span",{bind:this},i)))))}_onDropdownAfterCreate(e){this._dropdownElement=e;const t=e.querySelector(`.${q.dropdownListItemSelected}`)??e.firstChild;I(t)&&t instanceof HTMLElement&&(t.scrollIntoView(),t.focus())}_onAnchorClick(){return!this.disabled&&(this.viewModel.toggle(),!0)}_onDropdownItemClick(e){const t=e.currentTarget;this.viewModel.selectItem(t["data-result"])}_onDropdownFocusOut(e){let t=e.relatedTarget;t===null&&(t=document.activeElement),I(this._dropdownElement)&&!this._dropdownElement.contains(t)&&I(this._dropdownAnchor)&&!this._dropdownAnchor.contains(t)&&(this.viewModel.isDropdownOpen=!1)}_killEvent(e){return e.stopPropagation(),!0}_onDropdownKeyDown(e){e.stopPropagation(),De(e)===yt.closeDropdown&&(this.viewModel.isDropdownOpen=!1)}_onLiKeyDown(e){const t=e.target;switch(De(e)){case yt.moveSelectionUp:t.previousElementSibling&&t.previousElementSibling.focus();break;case yt.moveSelectionDown:t.nextElementSibling&&t.nextElementSibling.focus();break;case yt.selectItem:t.click()}}};l([h()],pe.prototype,"viewModel",void 0),l([h()],pe.prototype,"buttonTooltip",void 0),l([h()],pe.prototype,"showDropDown",void 0),l([h()],pe.prototype,"items",null),l([h()],pe.prototype,"currentIndex",null),l([h()],pe.prototype,"currentItem",null),l([h()],pe.prototype,"isDropdownOpen",null),pe=l([X("esri.widgets.Daylight.SliderWithDropdown")],pe);const ns=pe;function os(e,t){const i=kn(t),n=Date.now(),o=i.formatToParts(n),s=new Set;o.filter(({type:u})=>u==="literal").forEach(({value:u})=>s.add(u));let a=0;const r={};for(;o.length>0;){const{type:u,value:c}=o.shift();for(let m=0;m<c.length;m++,a++){const g=e.charAt(a);if(s.has(g)){a++;break}if(u==="literal")break;r[u]||(r[u]=[]),r[u].push(g)}}const d={};try{d.day=At(r.day.join("")),d.month=At(r.month.join("")),d.year=At((r.year||r.relatedYear).join(""))}catch{throw wi(t)}if(isNaN(d.day)||isNaN(d.month)||isNaN(d.year))throw wi(t);return d}function At(e){const t=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let i=0;i<10;i++)e=e.replace(t[i],i.toString());return Number(e)}function wi(e){return new Di(`could not parse date input, expecting the following format: ${oe(Date.now(),e)}`)}const Xe={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":7,"zh-hk":7,"zh-mo":7,"zh-tw":7},ss="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function ji(e){if(e=e.toLowerCase(),Xe[e])return Xe[e];if(ss)try{const i=new Intl.Locale(e).weekInfo.firstDay;return Xe[e]=i,i}catch{}const t=Cn(e);return Xe[t]?Xe[t]:7}function rs(e,t){return(t+7-ji(e))%7}const H="esri-date-picker",k={base:H,datePicker:`${H}__calendar`,monthPicker:`${H}__month-picker`,dayPicker:`${H}__day-picker`,week:`${H}__week-item`,nearbyMonth:`${H}__day-item--nearby-month`,activeDay:`${H}__day-item--active`,today:`${H}__day-item--today`,selectedDay:`${H}__day-item--selected`,day:`${H}__day-item`,dayHeader:`${H}__day-item--header`,yearPicker:`${H}__year-picker`,selectedYear:`${H}__year-picker-item--selected`,year:`${H}__year-picker-item`,monthDropdown:`${H}__month-dropdown`,date:`${H}__date`,datePickerToggle:`${H}__calendar-toggle`,dateInput:`${H}__input`,dateTextInput:`${H}__text-input`,leadingIcon:`${H}__icon--leading`,previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},Ve={year:"numeric",month:"2-digit",day:"2-digit"},as=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"];let Y=class extends Ke{constructor(e,t){super(e,t),this._calendarNode=null,this._inputOrButtonNode=null,this._rootNode=null,this._pageClickHandler=null,this._requestDayPickerFocusOnCreate=!1,this._activeDate=null,this._calendarPopover=new Ui({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._isOpen=!1,this.dateInputEnabled=!1,this.messages=null,this.commitOnMonthChange=!1,this.viewModel=new kt,this.disabled=!1,this.toggle=this.toggle.bind(this)}initialize(){this.addHandles(j(()=>{var e;return{viewModel:this.viewModel,value:(e=this.viewModel)==null?void 0:e.value}},({viewModel:e,value:t})=>{this.destroyed||!e||L(this.onChange)||this.onChange(t)},Oi))}destroy(){this._calendarPopover.destroy()}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get isOpen(){return this._isOpen}render(){return p("div",{afterCreate:gt,bind:this,class:this.classes(k.base,k.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this._renderInputAndButtonMode():this._renderButtonOnlyMode())}toggle(){this._isOpen?this.close():this.open()}open(e=!0){this._activeDate=Fe.fromJSDate(this.viewModel.value),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=e,this._pageClickHandler||(this._pageClickHandler=Pn(document,"click",({target:t})=>{var i,n;(i=this._calendarNode)!=null&&i.contains(t)||(n=this._rootNode)!=null&&n.contains(t)||this.close()}),this.addHandles(this._pageClickHandler)),this._pageClickHandler.resume()}close(e=!0){var t,i;this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,(t=this._pageClickHandler)==null||t.pause(),e&&((i=this._inputOrButtonNode)==null||i.focus())}_renderButtonOnlyMode(){const e=oe(this.viewModel.value,Ve),{disabled:t,_isOpen:i,messages:n}=this;return p("div",{key:`date-button-${t}`,afterCreate:gt,"aria-controls":i?this._getCalendarId():null,"aria-expanded":i.toString(),"aria-haspopup":"true","aria-label":n.setDate,"aria-pressed":i.toString(),bind:this,class:this.classes(k.button,k.select,k.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this.toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:t?void 0:0},p("span",{class:k.date},e))}_renderInputAndButtonMode(){const e=oe(this.viewModel.value,Ve),{_isOpen:t,messages:i}=this;return p("div",{class:this.classes(k.dateInput)},p("input",{afterCreate:gt,"data-node-ref":"_inputOrButtonNode","aria-controls":t?this._getCalendarId():null,"aria-haspopup":"true","aria-label":i.setDate,bind:this,class:this.classes(k.dateTextInput,k.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),p("span",{"aria-hidden":"true",class:this.classes(k.leadingIcon,k.calendarIcon)}))}_handleDateInputClick(){this.open(!1)}_handleDateInputKeyDown(e){const{key:t}=e;this._isOpen?t==="Enter"?this._handleDateText(e):t==="Escape"&&this.close():t==="ArrowDown"&&(this.open(),e.preventDefault())}_handleDateButtonKeyDown(e){const{key:t,shiftKey:i}=e;this._isOpen&&t==="Tab"&&i?this.close():vt(t)&&this.toggle()}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e)}_handleDateText(e){const t=e.currentTarget;let i;try{i=os(t.value,Ve)}catch(o){return nt.getLogger(this.declaredClass).warn(o),void(t.value=oe(this.viewModel.value,Ve))}const n=Fe.fromObject(i);n.isValid?(this.viewModel.value=n.toJSDate(),this._activeDate=n):t.value=oe(this.viewModel.value,Ve)}_handleDatePickerKeydown(e){De(e)==="Escape"&&(this.close(),e.preventDefault(),e.stopPropagation())}_renderCalendar(){const e=this._activeDate;if(!e)return null;const t=Fe.fromJSDate(this.viewModel.value);return p("div",{afterCreate:gt,bind:this,class:this.classes(k.datePicker,k.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,t),this._renderYearPicker(e))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_renderMonthPicker(e){const t=gn(this.container),i=t?k.nextIcon:k.previousIcon,n=t?k.previousIcon:k.nextIcon,o=On.months("long",{locale:bt()}).map((r,d)=>{const u=e.month-1===d;return p("option",{selected:u,value:d.toString()},r)}),{disabled:s,messages:a}=this;return p("div",{class:k.monthPicker},p("div",{key:`previous-month-${s}`,"aria-label":a.goToPreviousMonth,bind:this,class:k.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:s?void 0:0,title:a.goToPreviousMonth},p("span",{"aria-hidden":"true",class:i})),p("select",{"aria-live":"assertive","aria-label":a.selectMonth,bind:this,class:this.classes(k.monthDropdown,k.select),disabled:s,id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:a.selectMonth},o),p("div",{key:`next-month-${s}`,"aria-label":a.goToNextMonth,bind:this,class:k.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:s?void 0:0,title:a.goToNextMonth},p("span",{"aria-hidden":"true",class:n})))}_renderDayPicker(e,t){const i=this._getWeekLabels(),n=this._getDayId(e),o=this._renderMonth(e,t),{id:s,disabled:a}=this;return p("div",{key:`day-picker-${a}`,afterCreate:this._handleDayPickerCreate,"aria-activedescendant":n,"aria-labelledby":`${s}__month-picker ${s}__selected-year`,bind:this,class:k.dayPicker,id:`${s}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:a?void 0:0},p("div",{class:k.week,role:"row"},i.map(r=>p("div",{"aria-label":r.name,class:this.classes(k.day,k.dayHeader),role:"columnheader",title:r.name},r.abbr))),o)}_getDayId(e){return`${this.id}__${oe(e.valueOf(),Ve)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}_getWeekLabels(){const e=[],t={weekday:"long"},i={weekday:"narrow"};let n=Fe.now().set({weekday:ji(bt())});for(let o=0;o<7;o++)e.push({name:oe(n.valueOf(),t),abbr:oe(n.valueOf(),i)}),n=n.plus({day:1});return e}_handleDayPickerKeydown(e){const{ctrlKey:t,shiftKey:i}=e,n=De(e);if(!as.includes(n))return;let o=this._activeDate;if(o){if(n==="ArrowLeft")o=o.minus({day:1});else if(n==="ArrowRight")o=o.plus({day:1});else if(n==="ArrowUp")o=o.minus({week:1});else if(n==="ArrowDown")o=o.plus({week:1});else if(n==="PageUp"){const s=i?"year":"month";o=o.minus({[s]:1})}else if(n==="PageDown"){const s=i?"year":"month";o=o.plus({[s]:1})}else if(n==="Home"){const s=t?"year":"month";o=o.startOf(s)}else if(n==="End"){const s=t?"year":"month";o=o.endOf(s)}else vt(n)&&(this.viewModel.value=o.toJSDate(),this.close());this._activeDate=o,e.preventDefault(),e.stopPropagation()}}_renderMonth(e,t){const i=Fe.now(),n=e.startOf("month"),o=e.endOf("month"),s=6,a=7;let r=n.minus({day:rs(bt(),n.weekday)});const d=[];for(let u=0;u<s;u++){const c=[];for(let m=0;m<a;m++){const g=r.day,f=r.hasSame(e,"day"),_=r.hasSame(t,"day"),v=this._getDayId(r),y=Sn.fromDateTimes(n,o),E={[k.nearbyMonth]:!y.contains(r),[k.today]:r.hasSame(i,"day"),[k.activeDay]:f,[k.selectedDay]:_};c.push(p("div",{"aria-label":g.toString(),"aria-selected":f.toString(),bind:this,class:this.classes(k.day,E),"data-iso-date":r.toISO(),id:v,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},g)),r=r.plus({day:1})}d.push(p("div",{class:k.week,role:"row"},c))}return d}_renderYearPicker(e){const t={year:"numeric"},i=e,n=oe(i.valueOf(),t),o=oe(i.plus({year:1}).valueOf(),t),s=oe(i.minus({year:1}).valueOf(),t),{disabled:a,messages:r}=this;return p("div",{class:k.yearPicker},p("div",{key:`previous-year-${a}`,"aria-label":r.goToPreviousYear,bind:this,class:k.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:a?void 0:0,title:r.goToPreviousYear},s),p("div",{class:this.classes(k.year,k.selectedYear),id:`${this.id}__selected-year`},n),p("div",{key:`next-year-${a}`,"aria-label":r.goToNextYear,bind:this,class:k.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:a?void 0:0,title:r.goToNextYear},o))}_setMonth(e){const t=e.target,i=Number(t.value)+1;this._activeDate&&(this._activeDate=this._activeDate.set({month:i}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousMonth(){this._activeDate&&(this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_handlePreviousMonthKeyDown(e){if(e.key==="Tab"&&e.shiftKey)return e.preventDefault(),void this.close();vt(e.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate&&(this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.minus({year:1}))??null}_setNextYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.plus({year:1}))??null}_handleNextYearKeyDown(e){if(e.key==="Tab"&&!e.shiftKey)return e.preventDefault(),void this.close();vt(e.key)&&this._setNextYear()}_handleSelectedDate(e){const t=e.target;this.viewModel.value=Fe.fromISO(t.getAttribute("data-iso-date")).toJSDate(),this.close()}};l([h()],Y.prototype,"_activeDate",void 0),l([h()],Y.prototype,"_calendarPopover",void 0),l([h()],Y.prototype,"_isOpen",void 0),l([h()],Y.prototype,"dateInputEnabled",void 0),l([h(),Ae("esri/widgets/support/t9n/DatePicker")],Y.prototype,"messages",void 0),l([h()],Y.prototype,"value",null),l([h()],Y.prototype,"commitOnMonthChange",void 0),l([h({type:kt})],Y.prototype,"viewModel",void 0),l([h()],Y.prototype,"onChange",void 0),l([h()],Y.prototype,"disabled",void 0),l([h()],Y.prototype,"isOpen",null),l([Qe()],Y.prototype,"_setNextMonth",null),l([Qe()],Y.prototype,"_setPreviousYear",null),l([Qe()],Y.prototype,"_handleSelectedDate",null),Y=l([X("esri.widgets.support.DatePicker")],Y);const ls=Y,xi=/(.*)\s(.*)/,Vt="date",Ei="esri.widgets.Daylight";let U=class extends Ke{constructor(e,t){super(e,t),this.headingLevel=3,this.iconClass=A.widgetIcon,this.viewModel=new Ii,this.visibleElements=new Ai,this.dateOrSeason=Vt,this._timeSlider=new ns({viewModel:this.viewModel.timeSliderViewModel,steps:this.timeSliderSteps,labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:this._onPrimaryTickCreated.bind(this)},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:this._onSecondaryTickCreated.bind(this)}],items:[]}),this._datePicker=new ls({viewModel:this.viewModel.datePickerViewModel,commitOnMonthChange:!0}),this._onPlayDayClick=()=>{this.viewModel.toggleDayPlaying()},this._onYearPlayClick=()=>{this.viewModel.toggleYearPlaying()},this._onSeasonChange=i=>{const n=i.target;this.viewModel.currentSeason=n.value},this._onSunLightingCheckboxChange=()=>{this.viewModel.toggleSunLightingEnabled()},this._onShadowCheckboxChange=()=>{this.viewModel.toggleDirectShadowsEnabled()}}get gmtOffsets(){return de(this.timezoneMessages,Wn)}get label(){var e;return((e=this.messages)==null?void 0:e.title)??""}set label(e){this._overrideIfSome("label",e)}get playSpeedMultiplier(){return this.viewModel.playSpeedMultiplier}set playSpeedMultiplier(e){this.viewModel.playSpeedMultiplier=e}get timeSliderSteps(){var e;return((e=this._timeSlider)==null?void 0:e.steps)??5}set timeSliderSteps(e){this._timeSlider.steps=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get test(){return{datePicker:this._datePicker}}get _useAmPm(){const e=this._timeSlider.viewModel.getLabelForValue(0,"tick");return e!=null&&xi.test(e)}get _labelAlignmentClass(){var n;const e=((n=this.viewModel.timeSliderViewModel.values)==null?void 0:n[0])??0,t=60*(this._useAmPm?4:3),i=60*(this._useAmPm?21:21.5);return e<t?A.sliderAlignLeft:e>i?A.sliderAlignRight:null}postInitialize(){this.viewModel.isSupported&&this.addHandles([j(()=>this.viewModel.datePickerViewModel,e=>this._datePicker.viewModel=e,Te),j(()=>this.viewModel.timeSliderViewModel,e=>this._timeSlider.viewModel=e,Te),j(()=>this.timezoneMessages.chooseTimezone,e=>this._timeSlider.buttonTooltip=e,Te),j(()=>{var e;return(e=this.visibleElements)==null?void 0:e.timezone},e=>this._timeSlider.showDropDown=e,Te),j(()=>!this.viewModel.sunLightingEnabled,e=>{this._datePicker.disabled=e,this._timeSlider.disabled=e},Te),ot(()=>this.gmtOffsets,e=>{this._timeSlider.items=e.map(t=>({utcOffset:t.utcOffset,name:t.short,label:[t.shortWithUTC,t.long]}))},Te),j(()=>[this.viewModel.utcOffset,this.gmtOffsets],()=>this._onUTCOffsetChange(),Te),ot(()=>!this.visible,()=>{var e;return(e=this._datePicker)==null?void 0:e.close(!1)},Oi)])}destroy(){this._datePicker.destroy(),this._timeSlider.destroy()}render(){const{messages:e,viewModel:t,visibleElements:i}=this,n=t.isSupported;return p("div",{class:this.classes(A.base,A.widget)},n?p(vn,null,i.header&&p(nn,{level:this.headingLevel},e.title),this._renderTimeOptions(),i.datePicker&&this._renderDateOrSeason(),i.sunLightingToggle&&this._renderSunLightingToggle(),i.shadowsToggle&&this._renderShadowsToggle()):p("div",{key:"unsupported",class:A.panelError},p("p",null,e.unsupported)))}loadDependencies(){return Promise.all([Tt(()=>import("./calcite-button-9e156426.js"),["./calcite-button-9e156426.js","./widget-01c21b51.js","./jsonMap-ffa742d3.js","./typedArrayUtil-bf9f210a.js","./string-53224faa.js","./Error-5cdd6e0a.js","./ArrayPool-b51874dd.js","./nextTick-3ee5a785.js","./promiseUtils-5940888c.js","./intl-87d72dbe.js","./number-036ac4ef.js","./locale-fe7cc1d0.js","./messages-1516d146.js","./request-09e7d9b2.js","./preload-helper-41c905a7.js","./assets-94d592bf.js","./Evented-686173eb.js","./Promise-755e47e5.js","./reactiveUtils-53e5756b.js","./uuid-73213768.js","./form-fe1dc9bd.js","./interactive-1de2e238.js","./label2-f8b96630.js","./loadable-6afd516d.js","./t9n-fc0d9eed.js","./key-dd674229.js","./observers-955fedd9.js","./icon-e2d88df4.js","./loader-de98eb51.js","./guid-51402ee7.js"],import.meta.url),Tt(()=>import("./calcite-checkbox-e19ca409.js"),["./calcite-checkbox-e19ca409.js","./widget-01c21b51.js","./jsonMap-ffa742d3.js","./typedArrayUtil-bf9f210a.js","./string-53224faa.js","./Error-5cdd6e0a.js","./ArrayPool-b51874dd.js","./nextTick-3ee5a785.js","./promiseUtils-5940888c.js","./intl-87d72dbe.js","./number-036ac4ef.js","./locale-fe7cc1d0.js","./messages-1516d146.js","./request-09e7d9b2.js","./preload-helper-41c905a7.js","./assets-94d592bf.js","./Evented-686173eb.js","./Promise-755e47e5.js","./reactiveUtils-53e5756b.js","./uuid-73213768.js","./form-fe1dc9bd.js","./guid-51402ee7.js","./interactive-1de2e238.js","./key-dd674229.js","./label2-f8b96630.js","./loadable-6afd516d.js"],import.meta.url),Tt(()=>import("./calcite-label-947ad994.js"),["./calcite-label-947ad994.js","./widget-01c21b51.js","./jsonMap-ffa742d3.js","./typedArrayUtil-bf9f210a.js","./string-53224faa.js","./Error-5cdd6e0a.js","./ArrayPool-b51874dd.js","./nextTick-3ee5a785.js","./promiseUtils-5940888c.js","./intl-87d72dbe.js","./number-036ac4ef.js","./locale-fe7cc1d0.js","./messages-1516d146.js","./request-09e7d9b2.js","./preload-helper-41c905a7.js","./assets-94d592bf.js","./Evented-686173eb.js","./Promise-755e47e5.js","./reactiveUtils-53e5756b.js","./uuid-73213768.js","./label2-f8b96630.js"],import.meta.url)])}_renderTimeOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{directShadowsEnabled:n,dayPlaying:o}=e,s=!e.sunLightingEnabled;return p("div",{class:this.classes(A.dayContainer,this._labelAlignmentClass,{[A.shadowOn]:n,[A.shadowOff]:!n,[A.sliderDateOn]:t.datePicker,[A.sliderDateOff]:!t.datePicker,[A.sliderAmPmOn]:this._useAmPm,[A.containerDisabled]:s}),key:"daylight-time-options"},this._timeSlider.render(),t.playButtons&&this._renderPlayPauseButton({playing:o,disabled:s,label:i.playDay,onClick:this._onPlayDayClick}))}_renderDateOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{yearPlaying:n}=e,o=!e.sunLightingEnabled;return p("div",{key:"daylight-date-options",class:this.classes(A.dateContainer,o&&A.containerDisabled)},this._datePicker.render(),t.playButtons&&this._renderPlayPauseButton({playing:n,disabled:o,label:i.playYear,onClick:this._onYearPlayClick}))}_renderPlayPauseButton({playing:e,disabled:t,label:i,onClick:n}){return p("calcite-button",{appearance:"solid",class:A.playPauseButton,disabled:t,iconStart:e?"pause-f":"play-f",label:i,round:!0,title:i,type:"button",onclick:n})}_renderSeasonOptions(){const{messages:e,viewModel:t}=this,i=!t.sunLightingEnabled;return p("select",{class:this.classes(A.select,A.seasonPicker,i&&A.seasonPickerDisabled),disabled:i,value:t.currentSeason,"aria-label":e.season,onchange:this._onSeasonChange},$t.map(n=>p("option",{value:n},e[n])))}_renderDateOrSeason(){return this.dateOrSeason==="date"?this._renderDateOptions():this._renderSeasonOptions()}_renderSunLightingToggle(){var t;const e=(t=this.messages)==null?void 0:t.sunLightingToggle;return p("calcite-label",{key:"date-time-toggle",layout:"inline",title:e==null?void 0:e.tooltip,scale:"s"},p("calcite-checkbox",{class:A.sunLightingCheckbox,checked:this.viewModel.sunLightingEnabled,onCalciteCheckboxChange:this._onSunLightingCheckboxChange}),e==null?void 0:e.label)}_renderShadowsToggle(){const e=this.messages.shadowsToggle;return p("calcite-label",{key:"shadow-toggle",layout:"inline",title:e==null?void 0:e.tooltip,scale:"s"},p("calcite-checkbox",{class:A.shadowsCheckbox,checked:this.viewModel.directShadowsEnabled,onCalciteCheckboxChange:this._onShadowCheckboxChange}),e.label)}_onUTCOffsetChange(){var o;const e=this.viewModel.utcOffset,t=(o=this._timeSlider.currentItem)==null?void 0:o.utcOffset,i=this.gmtOffsets;if(L(i)||t===e)return;const n=i.findIndex(({utcOffset:s})=>s===e);n>-1&&(this._timeSlider.currentIndex=n)}_onPrimaryTickCreated(e,t,i){t.classList.add(...Lt,A.primaryTick),i.classList.add(...Lt,A.primaryTickLabel),i.onclick=t.onclick=this._makeGoToTime(e);const n=i.textContent,o=n!=null&&xi.exec(n);o&&(i.innerHTML=`${o[1]}<br><div class=${A.primaryTickAmPm}>${o[2]}</div>`)}_onSecondaryTickCreated(e,t){t.classList.add(...Lt,A.secondaryTick),t.onclick=this._makeGoToTime(e)}_makeGoToTime(e){return()=>{this.viewModel.timeSliderPosition=e}}};l([h({readOnly:!0})],U.prototype,"gmtOffsets",null),l([h(),Ae("esri/widgets/Daylight/t9n/Daylight")],U.prototype,"messages",void 0),l([h(),Ae("esri/widgets/support/t9n/timezone")],U.prototype,"timezoneMessages",void 0),l([h()],U.prototype,"headingLevel",void 0),l([h()],U.prototype,"iconClass",void 0),l([h()],U.prototype,"label",null),l([h()],U.prototype,"playSpeedMultiplier",null),l([h()],U.prototype,"timeSliderSteps",null),l([h()],U.prototype,"view",null),l([h({type:Ii})],U.prototype,"viewModel",void 0),l([h({type:Ai,nonNullable:!0})],U.prototype,"visibleElements",void 0),l([h({cast:e=>e==="season"||e==="date"?e:(nt.getLogger(Ei).warn(`"${e}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "${Vt}".`),Vt)})],U.prototype,"dateOrSeason",void 0),l([h()],U.prototype,"_timeSlider",void 0),l([h()],U.prototype,"_useAmPm",null),l([h()],U.prototype,"_labelAlignmentClass",null),l([h()],U.prototype,"_datePicker",void 0),U=l([X(Ei)],U);const Lt=["esri-interactive","esri-widget__anchor"],ds=U;let Dt=new on({basemap:"topo-vector",ground:{surfaceColor:"white"}}),xe=new Pi({camera:{position:{spatialReference:{wkid:102100},x:-19237,y:6707638,z:102},heading:324,tilt:73},container:"viewDiv",map:Dt,qualityProfile:"high"});var ki;((ki=xe.environment.lighting)==null?void 0:ki.type)==="sun"&&(xe.environment.lighting.directShadowsEnabled=!0);xe.ui.empty("top-left");const hs=new An({view:xe,content:new ds({view:xe}),group:"top-right",expanded:!1});xe.ui.add(hs,"top-right");let je=new Rt;je.elevationInfo={mode:"on-the-ground"};Dt.add(je);let lt=new Rt;lt.elevationInfo={mode:"on-the-ground"};lt.visible=!1;Dt.add(lt);let We=new Rt;We.visible=!1;Dt.add(We);const Wi=new Bt({symbolLayers:[new Mn({resource:{primitive:"circle"},material:{color:"red"},outline:{color:"brown",size:"1px"},size:20})]}),Ki=new Ht({x:-.176,y:51.48791,z:0}),cs=new Bt({symbolLayers:[{type:"icon",resource:{href:"pin.png"},anchor:"bottom",size:50}]}),us=new Et({geometry:Ki,symbol:cs});We.add(us);const ps=new Et({geometry:Ki,symbol:Wi});je.add(ps);const ms=new Ht({x:-.175,y:51.4877,z:-4}),fs=new Ht({x:-.175+37e-6,y:51.4877+125e-6,z:-4}),gs=new Bt({symbolLayers:[new Tn({resource:{href:"./pin.gltf"},material:{color:[66,126,245]},height:20})]}),vs=new Et({geometry:ms,symbol:gs});We.add(vs);const _s=new Et({geometry:fs,symbol:Wi});je.add(_s);function ys(){je.visible=!je.visible,lt.visible=!lt.visible,We.visible=!We.visible}document.getElementById("toggle-symbology").onclick=ys;xe.ui.add("paneDiv","bottom-right");const bs=new In({view:xe});xe.ui.add(bs,"bottom-left");
